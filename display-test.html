<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ãƒãƒƒã‚° - äºˆç´„çŠ¶æ³ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ - ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘</title>
    <style>
        /* å…¨ç”»é¢è¡¨ç¤ºç”¨ã®ãƒªã‚»ãƒƒãƒˆ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
            overflow: hidden;
        }

        /* ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚¨ãƒªã‚¢ */
        .display-area {
            width: 100vw;
            height: 100vh;
            position: relative;
        }

        /* ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .display-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 80px;
            text-align: center;
            color: white;
            transition: background-color 0.5s ease;
        }

        /* äºˆç´„å¯èƒ½ã®æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆæ¿ƒã„é»„ç·‘è‰²ï¼‰ */
        .display-container.available {
            background: #27ae60;
        }

        /* äºˆç´„ä¸å¯ã®æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆèµ¤è‰²ï¼‰ */
        .display-container.unavailable {
            background: #dc3545;
        }

        /* èª­ã¿è¾¼ã¿ä¸­ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .display-container.loading {
            background: #6C757D;
        }

        /* ã‚¯ãƒªãƒ‹ãƒƒã‚¯åï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ã«éè¡¨ç¤ºï¼‰ */
        .clinic-name {
            display: none;
        }

        /* ã‚¢ã‚¤ã‚³ãƒ³ */
        .icon {
            font-size: clamp(144px, 12vw, 200px);
            margin-bottom: 95px;
            margin-top: 80px;
            line-height: 1;
            animation: pulse 2s ease-in-out infinite;
            /* ç™½ã„ç¸å–ã‚ŠåŠ¹æœ */
            text-shadow:
                -4px -4px 0 white,
                4px -4px 0 white,
                -4px 4px 0 white,
                4px 4px 0 white,
                0 -4px 0 white,
                0 4px 0 white,
                -4px 0 0 white,
                4px 0 0 white,
                -3px -3px 0 white,
                3px -3px 0 white,
                -3px 3px 0 white,
                3px 3px 0 white;
        }

        /* ã‚¢ã‚¤ã‚³ãƒ³ã®ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.15);
            }
            100% {
                transform: scale(1);
            }
        }

        /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ãƒ•ãƒˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* èƒŒæ™¯ç‚¹æ»…ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãªã‚ã‚‰ã‹ï¼‰ */
        @keyframes bgBlink {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(var(--blink-intensity, 0.7)); }
        }

        /* èƒŒæ™¯ç‚¹æ»…ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆãƒ‘ãƒãƒ‘ãƒï¼‰ */
        @keyframes bgFlash {
            0%, 40% { filter: brightness(1); }
            50%, 90% { filter: brightness(var(--blink-intensity, 0.7)); }
            100% { filter: brightness(1); }
        }

        /* ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆç©ºãã‚ã‚Š/æº€æ ï¼‰ */
        .main-message {
            font-size: clamp(60px, 6vw, 120px);
            font-weight: 900;
            margin-bottom: 60px;
            line-height: 1.2;
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            animation: fadeIn 1s ease-in;
        }

        /* ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ã‚µãƒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .sub-message {
            font-size: clamp(41px, 4.1vw, 56px);
            margin-bottom: 5px;
            line-height: 1.6;
            opacity: 0.95;
        }

        /* QRã‚³ãƒ¼ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .qr-message {
            font-size: clamp(46px, 4.6vw, 64px);
            font-weight: 400;
            margin-top: 0;
            margin-bottom: 60px;
            opacity: 0.95;
        }

        /* æ›´æ–°æ™‚åˆ» */
        .update-time {
            font-size: clamp(30px, 3vw, 40px);
            opacity: 0.85;
            margin-top: 0;
        }

        /* ã‚¨ãƒ©ãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .display-container.error {
            background: linear-gradient(135deg, #868E96 0%, #6C757D 100%);
        }

        .error-message {
            font-size: clamp(36px, 4vw, 72px);
            margin-top: 40px;
        }

        /* æ˜¼ä¼‘ã¿ãƒãƒŠãƒ¼ */
        .lunch-break-banner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            background: #ffc107;
            color: #212529;
            font-size: clamp(16px, 2.8vw, 32px);
            font-weight: bold;
            text-align: center;
            padding: 0 20px;
            height: 115px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
        }

        .lunch-break-banner.show {
            display: block;
        }

        /* QRã‚³ãƒ¼ãƒ‰ï¼ˆå·¦ä¸‹å›ºå®šï¼‰ */
        .qr-code-corner {
            position: absolute;
            bottom: 30px;
            left: 20px;
            z-index: 1200;
        }

        .qr-code-corner img {
            display: block;
        }

        /* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒ†ãƒŠ */
        .layout-container {
            position: relative;
            height: calc(100vh - 100px);
            width: 100vw;
            margin-top: 100px;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        body.panel-hidden .layout-container {
            height: 100vh;
            margin-top: 0;
        }

        /* ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆç¸¦æ¨ªæ¯”ç¶­æŒï¼‰ */
        .preview-wrapper {
            height: 100%;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .preview-container {
            width: 100%;
            max-width: 100%;
            aspect-ratio: 16 / 9;
            position: relative;
            background: #000;
            overflow: hidden;
        }

        /* å®Ÿéš›ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚µã‚¤ã‚ºã§æç”»ã—ã¦scaleã§ç¸®å° */
        .preview-container .display-area {
            width: 1920px;
            height: 1080px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: center center;
        }

        .preview-container .display-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ï¼ˆå³å´ã«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼‰ */
        .debug-panel {
            position: absolute;
            top: 0;
            right: 0;
            width: min(50%, 640px);
            height: 100%;
            background: rgba(44, 62, 80, 0.97);
            color: white;
            padding: 20px;
            overflow-y: auto;
            font-size: 16px;
            display: block;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 10000;
        }

        /* ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«éè¡¨ç¤ºçŠ¶æ…‹ */
        .debug-panel.hidden {
            transform: translateX(100%);
            opacity: 0;
            pointer-events: none;
        }

        /* ãƒˆãƒƒãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆ2æ®µæ§‹æˆï¼‰ */
        .top-control-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #34495E;
            padding: 10px 20px;
            z-index: 10001;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        body.panel-hidden .top-control-bar {
            display: none;
        }

        .top-control-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 8px;
        }

        .top-control-row:last-child {
            margin-bottom: 0;
        }

        .top-control-bar button {
            padding: 8px 16px;
            background: #546E7A;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .top-control-bar button:hover {
            background: #607D8B;
        }

        .top-control-bar button.active {
            background: #2196F3;
            box-shadow: 0 0 10px rgba(33, 150, 243, 0.5);
        }

        .top-control-bar .separator {
            width: 2px;
            background: #546E7A;
            margin: 0 10px;
            height: 30px;
        }

        /* ãƒ‡ãƒãƒƒã‚°ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ï¼ˆéè¡¨ç¤ºï¼‰ */
        .debug-toggle-btn {
            display: none;
        }

        .debug-panel h3 {
            margin-bottom: 15px;
            font-size: 20px;
            color: #FFC107;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .debug-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #34495E;
        }

        .debug-tab {
            background: #34495E;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px 5px 0 0;
            transition: background 0.3s;
        }

        .debug-tab:hover {
            background: #415a77;
        }

        .debug-tab.active {
            background: #3498DB;
        }

        .debug-tab-content {
            display: none;
        }

        .debug-tab-content.active {
            display: block;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ */
        .debug-tab-content::-webkit-scrollbar {
            width: 10px;
        }

        .debug-tab-content::-webkit-scrollbar-track {
            background: #2C3E50;
            border-radius: 5px;
        }

        .debug-tab-content::-webkit-scrollbar-thumb {
            background: #7F8C8D;
            border-radius: 5px;
        }

        .debug-tab-content::-webkit-scrollbar-thumb:hover {
            background: #95A5A6;
        }

        /* ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå…¥åŠ› */
        .customize-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #555;
            border-radius: 5px;
            font-size: 14px;
            background: #34495E;
            color: white;
        }

        .icon-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .icon-selector button {
            font-size: 32px;
            padding: 10px;
            background: #34495E;
            border: 2px solid #555;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .icon-selector button:hover {
            background: #415a77;
        }

        .icon-selector button.selected {
            border-color: #3498DB;
            background: #3498DB;
        }

        .color-picker-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .color-picker-group input[type="color"] {
            width: 60px;
            height: 40px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .slider-group {
            margin: 15px 0;
        }

        .slider-group input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }

        .debug-close-btn {
            background: #E74C3C;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .debug-close-btn:hover {
            background: #C0392B;
        }

        .debug-export-btn,
        .debug-import-btn {
            background: #9B59B6;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 5px;
        }

        .debug-export-btn:hover,
        .debug-import-btn:hover {
            background: #8E44AD;
        }

        .preset-export-btn {
            flex: 0.5;
            background: #9B59B6;
            font-size: 14px;
        }

        .preset-export-btn:hover {
            background: #8E44AD;
        }

        #importFileInput {
            display: none;
        }

        .debug-section {
            margin-bottom: 15px;
        }

        .debug-section label {
            display: inline-block;
            width: 100px;
            font-weight: bold;
        }

        .debug-panel button {
            background: #7F8C8D;
            color: #FFFFFF;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .debug-panel button:hover {
            background: #95A5A6;
        }

        .debug-panel button.active {
            background: #3498DB;
            color: #FFFFFF;
        }

        /* ãƒ¢ãƒ¼ãƒ‰ãƒˆã‚°ãƒ«ã‚¹ã‚¤ãƒƒãƒ */
        .mode-toggle-container {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 15px;
            background: #34495E;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .mode-toggle-label {
            font-weight: bold;
            color: #FFC107;
        }

        .mode-toggle-switch {
            display: flex;
            background: #2C3E50;
            border-radius: 25px;
            padding: 3px;
            gap: 3px;
        }

        .mode-toggle-btn {
            padding: 8px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            background: transparent;
            color: #95A5A6;
        }

        .mode-toggle-btn.active {
            color: white;
        }

        .mode-toggle-btn.debug.active {
            background: #2ECC71;
        }

        .mode-toggle-btn.production.active {
            background: #3498DB;
        }

        .mode-status {
            margin-left: auto;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: bold;
        }

        .mode-status.debug {
            background: #2ECC71;
            color: white;
        }

        .mode-status.production {
            background: #3498DB;
            color: white;
        }

        .debug-panel input[type="time"] {
            padding: 8px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #555;
        }

        .debug-info {
            margin-top: 15px;
            padding: 15px;
            background: #34495E;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        .debug-info div {
            margin: 5px 0;
        }

        .preset-indicator {
            margin-bottom: 15px;
            padding: 10px 12px;
            background: rgba(52, 152, 219, 0.15);
            border: 1px solid rgba(52, 152, 219, 0.35);
            border-radius: 6px;
            font-size: 14px;
            color: #AED6F1;
        }

        /* ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ï¼ˆå³ä¸‹å›ºå®šï¼‰ */
        .floating-toggle-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: #3498DB;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 32px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            z-index: 10002;
            transition: all 0.3s ease;
            display: none;
        }

        .floating-toggle-btn:hover {
            background: #2980B9;
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5);
        }

        /* ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«éè¡¨ç¤ºæ™‚ã®ã¿ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º */
        body.panel-hidden .floating-toggle-btn {
            display: block;
        }
    </style>
</head>
<body>

<!-- ãƒˆãƒƒãƒ—ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆ2æ®µæ§‹æˆï¼‰ -->
<div class="top-control-bar">
    <!-- 1æ®µç›®ï¼šãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ãƒ»ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ‡æ›¿ãƒ»ãƒ‘ãƒãƒ«è¡¨ç¤º -->
    <div class="top-control-row">
        <button id="btnDebugModeTop" onclick="switchMode('debug')">ğŸŸ¢ ãƒ‡ãƒãƒƒã‚°</button>
        <button id="btnProductionModeTop" class="active" onclick="switchMode('production')">ğŸ”µ æœ¬ç•ª</button>
        <div class="separator"></div>
        <button id="btnAvailableStatus" onclick="switchTestStatus(true)">âœ… ç©ºãã‚ã‚Š</button>
        <button id="btnFullStatus" onclick="switchTestStatus(false)">âŒ æº€æ </button>
        <div class="separator"></div>
        <button id="btnTogglePanel" onclick="toggleDebugPanel()">ğŸ‘ï¸ ãƒ‘ãƒãƒ«è¡¨ç¤º</button>
    </div>

    <!-- 2æ®µç›®ï¼šè¨­å®šã‚¿ãƒ–ãƒ»ãƒ‡ãƒ¼ã‚¿æ“ä½œ -->
    <div class="top-control-row">
        <button class="debug-tab active" onclick="switchTab('time')">â° æ™‚é–“</button>
        <button class="debug-tab" onclick="switchTab('text')">ğŸ“ ãƒ†ã‚­ã‚¹ãƒˆ</button>
        <button class="debug-tab" onclick="switchTab('design')">ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³</button>
        <button class="debug-tab" onclick="switchTab('size')">ğŸ“ ã‚µã‚¤ã‚º</button>
        <button class="debug-tab" onclick="switchTab('layout')">ğŸ“ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</button>
        <button class="debug-tab" onclick="switchTab('banner')">ğŸ·ï¸ ãƒãƒŠãƒ¼</button>
        <button class="debug-tab" onclick="switchTab('qrcode')">ğŸ“± QRã‚³ãƒ¼ãƒ‰</button>
        <button class="debug-tab" onclick="switchTab('animation')">âš¡ ã‚¢ãƒ‹ãƒ¡1</button>
        <button class="debug-tab" onclick="switchTab('animation2')">âœ¨ ã‚¢ãƒ‹ãƒ¡2</button>
        <button class="debug-tab" onclick="switchTab('background')">ğŸŒˆ èƒŒæ™¯</button>
        <button class="debug-tab" onclick="switchTab('presets')">ğŸ’¾ è¨­å®š</button>
        <div class="separator"></div>
        <button onclick="exportCurrentSettings()">ğŸ“¤ æ›¸å‡º</button>
        <button onclick="triggerImport()">ğŸ“¥ å–è¾¼</button>
    </div>
</div>

<!-- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒ†ãƒŠ -->
<div class="layout-container">
    <!-- ãƒ¡ã‚¤ãƒ³è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
    <div class="preview-wrapper">
        <div class="preview-container">
            <div class="display-area">
                <!-- å–¶æ¥­æ™‚é–“å‰ãƒãƒŠãƒ¼ -->
                <div id="openingSoonBanner" class="lunch-break-banner">
                    10æ™‚ã«çª“å£ãŒé–‹ãã¾ã™ã€€ãŠå¾…ã¡ä¸‹ã•ã„
                </div>

                <!-- æ˜¼ä¼‘ã¿ãƒãƒŠãƒ¼ -->
                <div id="lunchBreakBanner" class="lunch-break-banner">
                    æ˜¼ä¼‘ã¿ä¸­ã€€åˆå¾Œï¼“æ™‚ã‚ˆã‚Šçª“å£ãŒé–‹ãã¾ã™
                </div>

                <!-- QRã‚³ãƒ¼ãƒ‰ï¼ˆå·¦ä¸‹å›ºå®šï¼‰ -->
                <div class="qr-code-corner">
                    <img src="Downloads/QR_fujiminohikari.png" alt="äºˆç´„QRã‚³ãƒ¼ãƒ‰">
                </div>

                <div id="displayContainer" class="display-container loading">
                    <div class="clinic-name">ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘</div>
                    <div class="icon">â³</div>
                    <div class="main-message">èª­ã¿è¾¼ã¿ä¸­...</div>
                    <div class="sub-message">ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰èµ·å‹•ä¸­</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ« -->
    <div id="debugPanel" class="debug-panel">
        <div id="currentPresetInfo" class="preset-indicator">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š</div>
        <input type="file" id="importFileInput" accept=".json" onchange="importSettings(event)">

        <!-- æ™‚é–“ã‚¿ãƒ– -->
        <div id="tab-time" class="debug-tab-content active">
            <div class="debug-section">
                <label>æ™‚é–“å¸¯:</label>
                <button onclick="setTestTime(9, 0)">å–¶æ¥­æ™‚é–“å‰ (9:00)</button>
                <button onclick="setTestTime(10, 0)">å–¶æ¥­æ™‚é–“ä¸­ (10:00)</button>
                <button onclick="setTestTime(14, 0)">æ˜¼ä¼‘ã¿ (14:00)</button>
                <button onclick="setTestTime(19, 0)">å–¶æ¥­æ™‚é–“å¤– (19:00)</button>
                <button onclick="setTestTime(18, 45)">18:30ä»¥é™ (18:45)</button>
            </div>

            <div class="debug-section">
                <label>æ›œæ—¥:</label>
                <button onclick="setDayOfWeek(0)">æ—¥</button>
                <button onclick="setDayOfWeek(1)">æœˆ</button>
                <button onclick="setDayOfWeek(2)">ç«</button>
                <button onclick="setDayOfWeek(3)">æ°´</button>
                <button onclick="setDayOfWeek(4)">æœ¨</button>
                <button onclick="setDayOfWeek(5)">é‡‘</button>
                <button onclick="setDayOfWeek(6)">åœŸ</button>
            </div>

            <div class="debug-section">
                <label>æ™‚åˆ»è¨­å®š:</label>
                <input type="time" id="timeInput" value="14:00">
                <button onclick="applyCustomTime()">é©ç”¨</button>
                <button onclick="resetToCurrentTime()">ç¾åœ¨æ™‚åˆ»ã«ãƒªã‚»ãƒƒãƒˆ</button>
            </div>
        </div>

        <!-- ãƒ†ã‚­ã‚¹ãƒˆã‚¿ãƒ– -->
        <div id="tab-text" class="debug-tab-content">
            <div class="debug-section">
                <label>ã‚¯ãƒªãƒ‹ãƒƒã‚¯å:</label>
                <input type="text" class="customize-input" id="customClinicName" value="ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘" oninput="applyCustomizations()">
            </div>

            <div class="debug-section">
                <label>ç©ºãã‚ã‚Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</label>
                <input type="text" class="customize-input" id="customAvailableMsg" value="{day}åˆ†ã®äºˆç´„æ  ã€Œç©ºãã€ã‚ã‚Š" oninput="applyCustomizations()">
                <small style="opacity: 0.7;">â€» {day} ã¯è‡ªå‹•ã§æœ¬æ—¥/æ˜æ—¥/æœ¨æ›œã«ç½®ãæ›ã‚ã‚Šã¾ã™</small>
            </div>

            <div class="debug-section">
                <label>æº€æ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</label>
                <input type="text" class="customize-input" id="customFullMsg" value="{day}ã®äºˆç´„ã¯ ã€Œæº€æ ã€ã§ã™" oninput="applyCustomizations()">
            </div>

            <div class="debug-section">
                <label>ã‚µãƒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</label>
                <input type="text" class="customize-input" id="customSubMsg" value="èª ã«æã‚Œå…¥ã‚Šã¾ã™ãŒã€ç¿Œè¨ºç™‚æ—¥ä»¥é™ã§ ã”äºˆç´„ãã ã•ã„" oninput="applyCustomizations()">
            </div>

            <div class="debug-section">
                <label>QRãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</label>
                <input type="text" class="customize-input" id="customQrMsg" value="å—ä»˜çª“å£ ã‚‚ã—ãã¯ QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰ ã”äºˆç´„ãã ã•ã„" oninput="applyCustomizations()">
            </div>
        </div>

    <!-- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¿ãƒ– -->
    <div id="tab-design" class="debug-tab-content">
        <div class="debug-section">
            <label>ç©ºãã‚ã‚Šã‚¢ã‚¤ã‚³ãƒ³:</label>
            <div class="icon-selector">
                <button onclick="selectIcon('available', 'ğŸ˜Š')">ğŸ˜Š</button>
                <button onclick="selectIcon('available', 'âœ…')">âœ…</button>
                <button onclick="selectIcon('available', 'âœ”ï¸')">âœ”ï¸</button>
                <button onclick="selectIcon('available', 'â­•')">â­•</button>
                <button onclick="selectIcon('available', 'ğŸŸ¢')">ğŸŸ¢</button>
                <button onclick="selectIcon('available', 'ğŸ‘')">ğŸ‘</button>
                <input type="text" class="customize-input" id="customAvailableIcon" value="â­•" placeholder="ã‚«ã‚¹ã‚¿ãƒ " style="width: 80px; text-align: center;" oninput="applyCustomizations()">
            </div>
        </div>

        <div class="debug-section">
            <label>æº€æ ã‚¢ã‚¤ã‚³ãƒ³:</label>
            <div class="icon-selector">
                <button onclick="selectIcon('full', 'ğŸ˜”')">ğŸ˜”</button>
                <button onclick="selectIcon('full', 'âŒ')">âŒ</button>
                <button onclick="selectIcon('full', 'âœ–ï¸')">âœ–ï¸</button>
                <button onclick="selectIcon('full', 'ğŸ™‡')">ğŸ™‡</button>
                <button onclick="selectIcon('full', 'â›”')">â›”</button>
                <button onclick="selectIcon('full', 'ğŸš«')">ğŸš«</button>
                <input type="text" class="customize-input" id="customFullIcon" value="ğŸ˜”" placeholder="ã‚«ã‚¹ã‚¿ãƒ " style="width: 80px; text-align: center;" oninput="applyCustomizations()">
            </div>
        </div>

        <div class="debug-section">
            <label>èƒŒæ™¯è‰²:</label>
            <div class="color-picker-group">
                <span>ç©ºãã‚ã‚Š:</span>
                <input type="color" id="customAvailableBg" value="#27ae60" oninput="applyCustomizations()">
                <span id="availableBgValue">#27ae60</span>
            </div>
            <div class="color-picker-group">
                <span>æº€æ :</span>
                <input type="color" id="customFullBg" value="#dc3545" oninput="applyCustomizations()">
                <span id="fullBgValue">#dc3545</span>
            </div>
            <div class="color-picker-group">
                <span>ãƒãƒŠãƒ¼èƒŒæ™¯:</span>
                <input type="color" id="customBannerBg" value="#ffc107" oninput="applyCustomizations()">
                <span id="bannerBgValue">#ffc107</span>
            </div>
            <div class="color-picker-group">
                <span>ãƒãƒŠãƒ¼æ–‡å­—:</span>
                <input type="color" id="customBannerText" value="#212529" oninput="applyCustomizations()">
                <span id="bannerTextValue">#212529</span>
            </div>
        </div>

        <div class="debug-section" style="border-top: 2px solid #ccc; padding-top: 20px; margin-top: 20px;">
            <label style="font-size: 1.1em; font-weight: bold;">ğŸ·ï¸ ã‚¿ãƒ–ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆãƒ•ã‚¡ãƒ“ã‚³ãƒ³ï¼‰:</label>

            <div style="margin: 15px 0;">
                <div class="button-group">
                    <button id="btnFaviconOn" class="btn active" onclick="toggleFavicon(true)">ON</button>
                    <button id="btnFaviconOff" class="btn" onclick="toggleFavicon(false)">OFF</button>
                </div>
            </div>

            <div id="faviconSettings" style="display: block;">
                <div class="debug-section">
                    <label>ğŸŸ¢ ç©ºãã‚ã‚Šãƒ•ã‚¡ãƒ“ã‚³ãƒ³:</label>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.9em; display: block; margin-bottom: 5px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ:</label>
                        <div class="icon-selector">
                            <button onclick="selectFaviconIcon('available', 'â—')">â—</button>
                            <button onclick="selectFaviconIcon('available', 'â—‹')">â—‹</button>
                            <button onclick="selectFaviconIcon('available', 'â—‰')">â—‰</button>
                            <button onclick="selectFaviconIcon('available', 'âœ“')">âœ“</button>
                            <button onclick="selectFaviconIcon('available', 'âœ”')">âœ”</button>
                            <button onclick="selectFaviconIcon('available', 'â­•')">â­•</button>
                            <button onclick="selectFaviconIcon('available', 'â—')">â—</button>
                            <button onclick="selectFaviconIcon('available', 'â˜‘')">â˜‘</button>
                            <button onclick="selectFaviconIcon('available', 'ç©º')">ç©º</button>
                            <button onclick="selectFaviconIcon('available', 'OK')">OK</button>
                            <button onclick="selectFaviconIcon('available', 'ğŸŸ¢')">ğŸŸ¢</button>
                            <button onclick="selectFaviconIcon('available', 'ğŸ˜Š')">ğŸ˜Š</button>
                        </div>
                    </div>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.9em; display: block; margin-bottom: 5px;">ã‚«ã‚¹ã‚¿ãƒ :</label>
                        <input type="text" class="customize-input" id="customFaviconAvailableIcon" value="â—" placeholder="æ–‡å­—/çµµæ–‡å­—" maxlength="2" style="width: 100px; text-align: center;" oninput="updateFaviconIcon('available', this.value)">
                    </div>
                    <div class="color-picker-group" style="margin-top: 10px;">
                        <span>è‰²:</span>
                        <input type="color" id="customFaviconAvailableColor" value="#4CAF50" oninput="updateFaviconColor('available', this.value)">
                        <span id="faviconAvailableColorValue">#4CAF50</span>
                        <span style="margin-left: 10px; font-size: 2em; font-weight: bold;" id="faviconAvailablePreview">â—</span>
                    </div>
                </div>

                <div class="debug-section">
                    <label>ğŸ”´ æº€æ ãƒ•ã‚¡ãƒ“ã‚³ãƒ³:</label>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.9em; display: block; margin-bottom: 5px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ:</label>
                        <div class="icon-selector">
                            <button onclick="selectFaviconIcon('full', 'âœ—')">âœ—</button>
                            <button onclick="selectFaviconIcon('full', 'Ã—')">Ã—</button>
                            <button onclick="selectFaviconIcon('full', 'âœ•')">âœ•</button>
                            <button onclick="selectFaviconIcon('full', 'â•³')">â•³</button>
                            <button onclick="selectFaviconIcon('full', 'âŒ')">âŒ</button>
                            <button onclick="selectFaviconIcon('full', 'â›”')">â›”</button>
                            <button onclick="selectFaviconIcon('full', 'â– ')">â– </button>
                            <button onclick="selectFaviconIcon('full', 'â–²')">â–²</button>
                            <button onclick="selectFaviconIcon('full', 'æº€')">æº€</button>
                            <button onclick="selectFaviconIcon('full', 'NG')">NG</button>
                            <button onclick="selectFaviconIcon('full', 'ğŸ”´')">ğŸ”´</button>
                            <button onclick="selectFaviconIcon('full', 'ğŸ˜”')">ğŸ˜”</button>
                        </div>
                    </div>
                    <div style="margin-top: 10px;">
                        <label style="font-size: 0.9em; display: block; margin-bottom: 5px;">ã‚«ã‚¹ã‚¿ãƒ :</label>
                        <input type="text" class="customize-input" id="customFaviconFullIcon" value="âœ—" placeholder="æ–‡å­—/çµµæ–‡å­—" maxlength="2" style="width: 100px; text-align: center;" oninput="updateFaviconIcon('full', this.value)">
                    </div>
                    <div class="color-picker-group" style="margin-top: 10px;">
                        <span>è‰²:</span>
                        <input type="color" id="customFaviconFullColor" value="#F44336" oninput="updateFaviconColor('full', this.value)">
                        <span id="faviconFullColorValue">#F44336</span>
                        <span style="margin-left: 10px; font-size: 2em; font-weight: bold;" id="faviconFullPreview">âœ—</span>
                    </div>
                </div>

                <div style="margin-top: 15px; padding: 12px; background: #e8f5e9; border-radius: 6px; font-size: 0.85em; color: #2e7d32;">
                    <strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong>
                    <ul style="margin: 8px 0 0 20px; padding: 0;">
                        <li>ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã‹ã€ã‚«ã‚¹ã‚¿ãƒ æ¬„ã«å¥½ããªæ–‡å­—ãƒ»çµµæ–‡å­—ã‚’å…¥åŠ›ã§ãã¾ã™</li>
                        <li>è‰²ã¨å½¢ã®ä¸¡æ–¹ã§åˆ¤åˆ¥ã§ãã‚‹ãŸã‚ã€è‰²è¦šéšœå®³ã‚’ãŠæŒã¡ã®æ–¹ã«ã‚‚å„ªã—ã„</li>
                        <li>ã‚¿ãƒ–ã‚¢ã‚¤ã‚³ãƒ³ãŒå¤‰ã‚ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã‚¿ãƒ–ã‚’é–‹ã„ã¦ã„ã‚‹æ™‚ã‚‚ä¸€ç›®ã§çŠ¶æ…‹ç¢ºèªã§ãã¾ã™</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ã‚µã‚¤ã‚ºã‚¿ãƒ– -->
    <div id="tab-size" class="debug-tab-content">
        <div class="slider-group">
            <label>ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º: <span id="iconSizeValue">12vw</span></label>
            <input type="range" id="iconSize" min="6" max="15" step="0.5" value="12" oninput="updateIconSize(this.value)">
        </div>

        <div class="slider-group">
            <label>ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚º: <span id="mainMsgSizeValue">6vw</span></label>
            <input type="range" id="mainMsgSize" min="4.0" max="10.0" step="0.5" value="6.0" oninput="updateMainMsgSize(this.value)">
        </div>

        <div class="slider-group">
            <label>ã‚µãƒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚º: <span id="subMsgSizeValue">4.1vw</span></label>
            <input type="range" id="subMsgSize" min="2.0" max="6.0" step="0.1" value="4.1" oninput="updateSubMsgSize(this.value)">
        </div>

        <div class="slider-group">
            <label>QRãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚º: <span id="qrMsgSizeValue">4.6vw</span></label>
            <input type="range" id="qrMsgSize" min="2.0" max="6.0" step="0.1" value="4.6" oninput="updateQrMsgSize(this.value)">
        </div>

        <div class="slider-group">
            <label>æ›´æ–°æ™‚åˆ»ã‚µã‚¤ã‚º: <span id="updateTimeSizeValue">3vw</span></label>
            <input type="range" id="updateTimeSize" min="1.0" max="4.0" step="0.1" value="3.0" oninput="updateTimeSize(this.value)">
        </div>
    </div>

    <!-- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¿ãƒ– -->
    <div id="tab-layout" class="debug-tab-content">
        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ“ è¦ç´ é–“ã®é–“éš”</h4>

            <div class="slider-group">
            <label>ã‚¢ã‚¤ã‚³ãƒ³ â†’ ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: <span id="iconToMainGapValue">95px</span></label>
            <input type="range" id="iconToMainGap" min="0" max="120" step="5" value="95"
                       oninput="updateIconToMainGap(this.value)">
            </div>

            <div class="slider-group">
            <label>ãƒ¡ã‚¤ãƒ³ â†’ ã‚µãƒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: <span id="mainToSubGapValue">60px</span></label>
            <input type="range" id="mainToSubGap" min="0" max="100" step="5" value="60"
                       oninput="updateMainToSubGap(this.value)">
            </div>

            <div class="slider-group">
            <label>ã‚µãƒ– â†’ QRãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: <span id="subToQrGapValue">5px</span></label>
            <input type="range" id="subToQrGap" min="0" max="80" step="5" value="5"
                       oninput="updateSubToQrGap(this.value)">
            </div>

            <div class="slider-group">
            <label>QR â†’ æ›´æ–°æ™‚åˆ»: <span id="qrToUpdateGapValue">60px</span></label>
            <input type="range" id="qrToUpdateGap" min="0" max="80" step="5" value="60"
                       oninput="updateQrToUpdateGap(this.value)">
            </div>
        </div>

        <div class="debug-section" style="margin-top: 20px;">
            <h4 style="color: #FFC107; margin-bottom: 15px;">âœï¸ ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</h4>

            <div class="slider-group">
            <label>ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¤ªã•: <span id="mainMsgFontWeightValue">æ¥µå¤ª</span></label>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="setMainMsgFontWeight(400)">æ¨™æº–</button>
                    <button onclick="setMainMsgFontWeight(700)">å¤ªå­—</button>
                    <button onclick="setMainMsgFontWeight(900)">æ¥µå¤ª</button>
                </div>
            </div>

            <div class="slider-group">
                <label>ã‚µãƒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¤ªã•: <span id="subMsgFontWeightValue">æ¨™æº–</span></label>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="setSubMsgFontWeight(400)">æ¨™æº–</button>
                    <button onclick="setSubMsgFontWeight(700)">å¤ªå­—</button>
                    <button onclick="setSubMsgFontWeight(900)">æ¥µå¤ª</button>
                </div>
            </div>

            <div class="slider-group">
                <label>QRãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¤ªã•: <span id="qrMsgFontWeightValue">æ¨™æº–</span></label>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="setQrMsgFontWeight(400)">æ¨™æº–</button>
                    <button onclick="setQrMsgFontWeight(700)">å¤ªå­—</button>
                    <button onclick="setQrMsgFontWeight(900)">æ¥µå¤ª</button>
                </div>
            </div>

            <div class="slider-group">
                <label>æ›´æ–°æ™‚åˆ»ã®å¤ªã•: <span id="updateTimeFontWeightValue">æ¨™æº–</span></label>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button onclick="setUpdateTimeFontWeight(400)">æ¨™æº–</button>
                    <button onclick="setUpdateTimeFontWeight(700)">å¤ªå­—</button>
                    <button onclick="setUpdateTimeFontWeight(900)">æ¥µå¤ª</button>
                </div>
            </div>

            <div class="slider-group">
                <label>ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡Œé–“: <span id="mainMsgLineHeightValue">1.2</span></label>
                <input type="range" id="mainMsgLineHeight" min="1.0" max="2.0" step="0.1" value="1.2"
                       oninput="updateMainMsgLineHeight(this.value)">
            </div>

            <div class="slider-group">
                <label>ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ–‡å­—é–“éš”: <span id="mainMsgLetterSpacingValue">0px</span></label>
                <input type="range" id="mainMsgLetterSpacing" min="0" max="10" step="1" value="0"
                       oninput="updateMainMsgLetterSpacing(this.value)">
            </div>
        </div>

        <div class="debug-section" style="margin-top: 20px;">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ¨ ãƒ†ã‚­ã‚¹ãƒˆåŠ¹æœ</h4>

            <div class="debug-section">
                <label>ãƒ†ã‚­ã‚¹ãƒˆã®å½±:</label>
                <button id="btnTextShadowOn" onclick="toggleTextShadow(true)">ON</button>
                <button id="btnTextShadowOff" onclick="toggleTextShadow(false)">OFF</button>
            </div>

            <div class="slider-group">
                <label>å½±ã®è‰²:</label>
                <input type="color" id="textShadowColor" value="#000000" oninput="applyLayoutSettings()">
            </div>

            <div class="slider-group">
                <label>å½±ã®ã¼ã‹ã—: <span id="textShadowBlurValue">5px</span></label>
                <input type="range" id="textShadowBlur" min="0" max="20" step="1" value="5"
                       oninput="updateTextShadowBlur(this.value)">
            </div>

            <div class="slider-group">
                <label>å½±ã®è·é›¢: <span id="textShadowDistanceValue">3px</span></label>
                <input type="range" id="textShadowDistance" min="0" max="10" step="1" value="3"
                       oninput="updateTextShadowDistance(this.value)">
            </div>

            <hr style="margin: 20px 0; border: 1px solid #555;">

            <div class="debug-section">
                <label>ãƒ†ã‚­ã‚¹ãƒˆã®ç¸å–ã‚Š:</label>
                <button id="btnTextStrokeOn" onclick="toggleTextStroke(true)">ON</button>
                <button id="btnTextStrokeOff" onclick="toggleTextStroke(false)">OFF</button>
            </div>

            <div class="slider-group">
                <label>ç¸å–ã‚Šã®è‰²:</label>
                <input type="color" id="textStrokeColor" value="#ffffff" oninput="applyLayoutSettings()">
            </div>

            <div class="slider-group">
                <label>ç¸å–ã‚Šã®å¤ªã•: <span id="textStrokeWidthValue">2px</span></label>
                <input type="range" id="textStrokeWidth" min="1" max="5" step="1" value="2"
                       oninput="updateTextStrokeWidth(this.value)">
            </div>
        </div>
    </div>

    <!-- ãƒãƒŠãƒ¼ã‚¿ãƒ– -->
    <div id="tab-banner" class="debug-tab-content">
        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ“ å–¶æ¥­æ™‚é–“å‰ãƒãƒŠãƒ¼</h4>
            <label>ãƒ†ã‚­ã‚¹ãƒˆ:</label>
            <input type="text" id="openingSoonText" value="10æ™‚ã«çª“å£ãŒé–‹ãã¾ã™ã€€ãŠå¾…ã¡ä¸‹ã•ã„"
                   style="width: 100%; padding: 8px; font-size: 14px; margin-top: 5px;"
                   oninput="applyCustomizations()">
        </div>

        <div class="debug-section" style="margin-top: 20px;">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ“ æ˜¼ä¼‘ã¿ãƒãƒŠãƒ¼</h4>
            <label>ãƒ†ã‚­ã‚¹ãƒˆ:</label>
            <input type="text" id="lunchBreakText" value="æ˜¼ä¼‘ã¿ä¸­ã€€åˆå¾Œï¼“æ™‚ã‚ˆã‚Šçª“å£ãŒé–‹ãã¾ã™"
                   style="width: 100%; padding: 8px; font-size: 14px; margin-top: 5px;"
                   oninput="applyCustomizations()">
        </div>

        <div class="debug-section" style="margin-top: 20px;">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ“ ãƒãƒŠãƒ¼å…±é€šè¨­å®š</h4>

            <div class="slider-group">
                <label>ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚º: <span id="bannerFontSizeValue">2.8vw</span></label>
                <input type="range" id="bannerFontSize" min="2.0" max="5.0" step="0.1" value="2.8"
                       oninput="updateBannerFontSize(this.value)">
            </div>

            <div class="slider-group">
                <label>ãƒãƒŠãƒ¼é«˜ã•: <span id="bannerHeightValue">115px</span></label>
                <input type="range" id="bannerHeight" min="50" max="150" step="5" value="115"
                       oninput="updateBannerHeight(this.value)">
            </div>

            <div class="slider-group">
                <label>ä¸Šä¸‹ä½™ç™½: <span id="bannerPaddingValue">0px</span></label>
                <input type="range" id="bannerPadding" min="0" max="30" step="5" value="0"
                       oninput="updateBannerPadding(this.value)">
            </div>
        </div>
    </div>

    <!-- QRã‚³ãƒ¼ãƒ‰ã‚¿ãƒ– -->
    <div id="tab-qrcode" class="debug-tab-content">
        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ“± QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºè¨­å®š</h4>

            <label>QRã‚³ãƒ¼ãƒ‰è¡¨ç¤º:</label>
            <button id="btnQrOn" onclick="toggleQr(true)" class="active">ON</button>
            <button id="btnQrOff" onclick="toggleQr(false)">OFF</button>
        </div>

        <div id="qrSettings" style="margin-top: 20px;">
            <div class="debug-section">
                <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ–¼ï¸ ç”»åƒè¨­å®š</h4>
                <label>ç”»åƒURL:</label>
                <input type="text" id="qrImageUrl" value="Downloads/QR_fujiminohikari.png"
                       style="width: 100%; padding: 8px; font-size: 14px; margin-top: 5px;"
                       oninput="applyQRSettings()">
                <p style="opacity: 0.6; font-size: 12px; margin-top: 5px;">ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯çµ¶å¯¾URLã‚’æŒ‡å®šã—ã¦ãã ã•ã„</p>
            </div>

            <div class="debug-section" style="margin-top: 20px;">
                <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ“ ã‚µã‚¤ã‚ºã¨ä½ç½®</h4>

                <div class="slider-group">
                    <label>ã‚µã‚¤ã‚º: <span id="qrSizeValue">175px</span></label>
                    <input type="range" id="qrSize" min="50" max="250" step="5" value="175"
                           oninput="updateQrSize(this.value)">
                </div>

                <label style="display: block; margin-top: 15px;">è¡¨ç¤ºä½ç½®:</label>
                <select id="qrPosition" onchange="applyQRSettings()"
                        style="width: 100%; padding: 8px; font-size: 14px; margin-top: 5px;">
                    <option value="bottom-left">å·¦ä¸‹</option>
                    <option value="bottom-right">å³ä¸‹</option>
                    <option value="top-left">å·¦ä¸Š</option>
                    <option value="top-right">å³ä¸Š</option>
                    <option value="hidden">éè¡¨ç¤º</option>
                </select>
            </div>

            <div class="debug-section" style="margin-top: 20px;">
                <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š</h4>

                <div class="slider-group">
                    <label>ä¸é€æ˜åº¦: <span id="qrOpacityValue">100%</span></label>
                    <input type="range" id="qrOpacity" min="0" max="100" step="5" value="100"
                           oninput="updateQrOpacity(this.value)">
                </div>

                <div class="slider-group">
                    <label>è§’ä¸¸: <span id="qrBorderRadiusValue">10px</span></label>
                    <input type="range" id="qrBorderRadius" min="0" max="20" step="1" value="10"
                           oninput="updateQrBorderRadius(this.value)">
                </div>

                <label style="display: block; margin-top: 15px;">å½±åŠ¹æœ:</label>
                <button id="btnQrShadowOn" onclick="toggleQrShadow(true)" class="active">ON</button>
                <button id="btnQrShadowOff" onclick="toggleQrShadow(false)">OFF</button>
            </div>
        </div>
    </div>

    <!-- ã‚¢ãƒ‹ãƒ¡1ã‚¿ãƒ– -->
    <div id="tab-animation" class="debug-tab-content">
        <div class="debug-section">
            <label>ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³:</label>
            <button id="btnPulseOn" onclick="togglePulse(true)">ON</button>
            <button id="btnPulseOff" onclick="togglePulse(false)">OFF</button>
        </div>

        <div class="slider-group">
            <label>ãƒ‘ãƒ«ã‚¹é€Ÿåº¦: <span id="pulseSpeedValue">é…ã„ (3.0ç§’)</span></label>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="btnPulseSpeedSlow" onclick="setPulseSpeed('slow')">é…ã„</button>
                <button id="btnPulseSpeedNormal" onclick="setPulseSpeed('normal')">æ™®é€š</button>
                <button id="btnPulseSpeedFast" onclick="setPulseSpeed('fast')">é€Ÿã„</button>
            </div>
        </div>

        <div class="slider-group">
            <label>ãƒ‘ãƒ«ã‚¹æ‹¡å¤§ç‡: <span id="pulseScaleValue">1.15</span></label>
            <input type="range" id="pulseScale" min="1.0" max="1.5" step="0.05" value="1.15" oninput="updatePulseScale(this.value)">
        </div>

        <hr style="margin: 20px 0; border: 1px solid #555;">

        <div class="debug-section">
            <label>ãƒ†ã‚­ã‚¹ãƒˆã‚°ãƒ­ãƒ¼ï¼ˆå…‰ã‚‹æ–‡å­—ï¼‰:</label>
            <button id="btnGlowOn" onclick="toggleGlow(true)">ON</button>
            <button id="btnGlowOff" onclick="toggleGlow(false)">OFF</button>
        </div>

        <div class="slider-group">
            <label>å…‰ã®å¼·ã•: <span id="glowIntensityValue">å¼±</span></label>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button onclick="setGlowIntensity('weak')">å¼±</button>
                <button onclick="setGlowIntensity('medium')">ä¸­</button>
                <button onclick="setGlowIntensity('strong')">å¼·</button>
            </div>
        </div>

        <div class="slider-group">
            <label>å…‰ã®è‰²:</label>
            <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                <button onclick="setGlowColor('white')" style="background: white; color: black;">âšª ç™½</button>
                <button onclick="setGlowColor('yellow')" style="background: #FFD700; color: black;">ğŸŸ¡ é»„</button>
                <button onclick="setGlowColor('cyan')" style="background: #00FFFF; color: black;">ğŸ”µ é’</button>
                <button onclick="setGlowColor('lime')" style="background: #00FF00; color: black;">ğŸŸ¢ ç·‘</button>
                <button onclick="setGlowColor('rainbow')" style="background: linear-gradient(90deg, red, yellow, green, cyan, blue, magenta); color: white;">ğŸŒˆ è™¹</button>
            </div>
        </div>

        <div class="debug-section">
            <label>ãƒ‘ãƒ«ã‚¹å…‰ï¼ˆç‚¹æ»…ï¼‰:</label>
            <button id="btnGlowPulseOn" onclick="toggleGlowPulse(true)">ON</button>
            <button id="btnGlowPulseOff" onclick="toggleGlowPulse(false)">OFF</button>
        </div>

        <hr style="margin: 20px 0; border: 1px solid #555;">

        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ”† èƒŒæ™¯ç‚¹æ»…</h4>
            <label>èƒŒæ™¯ç‚¹æ»…:</label>
            <button id="btnBgBlinkOn" onclick="toggleBgBlink(true)">ON</button>
            <button id="btnBgBlinkOff" onclick="toggleBgBlink(false)" class="active">OFF</button>
        </div>

        <div class="slider-group">
            <label>ç‚¹æ»…é€Ÿåº¦: <span id="bgBlinkSpeedValue">æ™®é€š (1.5ç§’)</span></label>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="btnBgBlinkSpeedSlow" onclick="setBgBlinkSpeed('slow')">é…ã„</button>
                <button id="btnBgBlinkSpeedNormal" onclick="setBgBlinkSpeed('normal')" class="active">æ™®é€š</button>
                <button id="btnBgBlinkSpeedFast" onclick="setBgBlinkSpeed('fast')">é€Ÿã„</button>
            </div>
        </div>

        <div class="slider-group">
            <label>ç‚¹æ»…ãƒ‘ã‚¿ãƒ¼ãƒ³: <span id="bgBlinkPatternValue">ãªã‚ã‚‰ã‹</span></label>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <button id="btnBgBlinkPatternPulse" onclick="setBgBlinkPattern('pulse')" class="active">ãªã‚ã‚‰ã‹</button>
                <button id="btnBgBlinkPatternFlash" onclick="setBgBlinkPattern('flash')">ãƒ‘ãƒãƒ‘ãƒ</button>
            </div>
        </div>

        <div class="slider-group">
            <label>æš—ããªã‚‹åº¦åˆã„: <span id="bgBlinkIntensityValue">0.3</span></label>
            <input type="range" id="bgBlinkIntensity" min="0.1" max="0.5" step="0.05" value="0.3" oninput="updateBgBlinkIntensity(this.value)">
        </div>

        <div style="margin-top: 15px; padding: 12px; background: rgba(255,193,7,0.1); border-radius: 6px; font-size: 0.85em; color: #ffc107;">
            <strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ç›®ã‚’å¼•ããŸã„æ™‚ã«æœ‰åŠ¹ã§ã™ãŒã€é•·æ™‚é–“è¡¨ç¤ºã§ã¯æ§ãˆã‚è¨­å®šãŒãŠã™ã™ã‚ã§ã™
        </div>
    </div>

    <!-- ã‚¢ãƒ‹ãƒ¡2ã‚¿ãƒ– -->
    <div id="tab-animation2" class="debug-tab-content">
        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸˆ ãµã‚ãµã‚æµ®éŠ</h4>
            <div style="margin-bottom: 10px;">
                <label>å¯¾è±¡:</label>
                <button id="btnFloatIcon" onclick="setFloatTarget('icon')">ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿</button>
                <button id="btnFloatText" onclick="setFloatTarget('text')">æ–‡å­—ã®ã¿</button>
                <button id="btnFloatBoth" onclick="setFloatTarget('both')">ä¸¡æ–¹</button>
                <button id="btnFloatOff" onclick="setFloatTarget('off')">OFF</button>
            </div>
            <div style="margin-bottom: 10px;">
                <label>é€Ÿåº¦:</label>
                <button onclick="setFloatSpeed('slow')">é…ã„</button>
                <button onclick="setFloatSpeed('normal')">æ™®é€š</button>
                <button onclick="setFloatSpeed('fast')">é€Ÿã„</button>
            </div>
        </div>

        <hr style="margin: 20px 0; border: 1px solid #555;">

        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ” æ‹¡å¤§ç¸®å°</h4>
            <div style="margin-bottom: 10px;">
                <label>å¯¾è±¡:</label>
                <button id="btnZoomIcon" onclick="setZoomTarget('icon')">ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿</button>
                <button id="btnZoomText" onclick="setZoomTarget('text')">æ–‡å­—ã®ã¿</button>
                <button id="btnZoomBoth" onclick="setZoomTarget('both')">ä¸¡æ–¹</button>
                <button id="btnZoomOff" onclick="setZoomTarget('off')">OFF</button>
            </div>
            <div style="margin-bottom: 10px;">
                <label>é€Ÿåº¦:</label>
                <button onclick="setZoomSpeed('slow')">é…ã„</button>
                <button onclick="setZoomSpeed('normal')">æ™®é€š</button>
                <button onclick="setZoomSpeed('fast')">é€Ÿã„</button>
            </div>
        </div>

        <hr style="margin: 20px 0; border: 1px solid #555;">

        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">âœ¨ ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</h4>
            <button id="btnSparkleOn" onclick="toggleSparkle(true)">ON</button>
            <button id="btnSparkleOff" onclick="toggleSparkle(false)">OFF</button>
        </div>

        <hr style="margin: 20px 0; border: 1px solid #555;">

        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ’« ãƒã‚ªãƒ³ç‚¹æ»…</h4>
            <button id="btnNeonOn" onclick="toggleNeon(true)">ON</button>
            <button id="btnNeonOff" onclick="toggleNeon(false)">OFF</button>
            <div style="margin-top: 10px;">
                <label>é€Ÿåº¦:</label>
                <button onclick="setNeonSpeed('slow')">é…ã„</button>
                <button onclick="setNeonSpeed('normal')">æ™®é€š</button>
                <button onclick="setNeonSpeed('fast')">é€Ÿã„</button>
            </div>
        </div>

        <hr style="margin: 20px 0; border: 1px solid #555;">

        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸŒ ç”»é¢å…¨ä½“ã®å‹•ã</h4>
            <button id="btnScreenNone" onclick="setScreenEffect('none')">ãªã—</button>
            <button id="btnScreenShakeV" onclick="setScreenEffect('shakeV')">ä¸Šä¸‹æºã‚Œ</button>
            <button id="btnScreenShakeH" onclick="setScreenEffect('shakeH')">å·¦å³æºã‚Œ</button>
            <button id="btnScreenZoom" onclick="setScreenEffect('zoom')">æ‹¡å¤§ç¸®å°</button>
        </div>
    </div>

    <!-- èƒŒæ™¯ã‚¿ãƒ– -->
    <div id="tab-background" class="debug-tab-content">
        <div class="debug-section">
            <label>ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³:</label>
            <button id="btnGradientOn" onclick="toggleGradient(true)">ON</button>
            <button id="btnGradientOff" onclick="toggleGradient(false)">OFF</button>
        </div>

        <div class="slider-group">
            <label>ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç¨®é¡: <span id="gradientTypeValue">æ–œã‚</span></label>
            <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                <button onclick="setGradientType('diagonal')">æ–œã‚</button>
                <button onclick="setGradientType('radial')">æ”¾å°„çŠ¶</button>
                <button onclick="setGradientType('horizontal')">æ¨ª</button>
                <button onclick="setGradientType('vertical')">ç¸¦</button>
            </div>
        </div>

        <div class="debug-section">
            <label>ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è‰²:</label>
            <div class="color-picker-group">
                <span>è‰²1:</span>
                <input type="color" id="customGradientColor1" value="#27ae60" oninput="applyGradient()">
                <span id="gradientColor1Value">#27ae60</span>
            </div>
            <div class="color-picker-group">
                <span>è‰²2:</span>
                <input type="color" id="customGradientColor2" value="#1e8449" oninput="applyGradient()">
                <span id="gradientColor2Value">#1e8449</span>
            </div>
        </div>

        <div class="debug-section">
            <label>ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³:</label>
            <button id="btnGradientAnimOn" onclick="toggleGradientAnim(true)">ON</button>
            <button id="btnGradientAnimOff" onclick="toggleGradientAnim(false)">OFF</button>
            <small style="opacity: 0.7; display: block; margin-top: 5px;">â€» ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚†ã£ãã‚Šå‹•ãã¾ã™</small>
        </div>
    </div>

    <!-- è¨­å®šã‚¿ãƒ– -->
    <div id="tab-presets" class="debug-tab-content">
        <div class="debug-section">
            <h4 style="color: #FFC107; margin-bottom: 15px;">ğŸ’¾ ãƒ—ãƒªã‚»ãƒƒãƒˆç®¡ç†</h4>
            <p style="opacity: 0.8; margin-bottom: 20px; font-size: 14px;">
                ç¾åœ¨ã®è¨­å®šã‚’ä¿å­˜ã—ã¦ã€ã„ã¤ã§ã‚‚å‘¼ã³å‡ºã›ã¾ã™ã€‚å­£ç¯€ã‚„çŠ¶æ³ã«å¿œã˜ã¦ä½¿ã„åˆ†ã‘ã¾ã—ã‚‡ã†ï¼
            </p>
        </div>

        <div style="display: grid; gap: 15px;">
            <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆ 1 -->
            <div class="preset-item">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <span style="font-weight: bold; width: 80px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ 1:</span>
                    <input type="text" id="presetName1" class="customize-input" placeholder="è¨­å®šåã‚’å…¥åŠ›" style="flex: 1;">
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="savePreset(1)" style="flex: 1; background: #2ECC71;">ğŸ’¾ ä¿å­˜</button>
                    <button onclick="loadPreset(1)" style="flex: 1; background: #3498DB;">ğŸ“¥ èª­è¾¼</button>
                    <button onclick="exportPreset(1)" class="preset-export-btn">ğŸ“¤ æ›¸å‡º</button>
                    <button onclick="deletePreset(1)" style="background: #E74C3C;">ğŸ—‘ï¸</button>
                </div>
            </div>

            <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆ 2 -->
            <div class="preset-item">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <span style="font-weight: bold; width: 80px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ 2:</span>
                    <input type="text" id="presetName2" class="customize-input" placeholder="è¨­å®šåã‚’å…¥åŠ›" style="flex: 1;">
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="savePreset(2)" style="flex: 1; background: #2ECC71;">ğŸ’¾ ä¿å­˜</button>
                    <button onclick="loadPreset(2)" style="flex: 1; background: #3498DB;">ğŸ“¥ èª­è¾¼</button>
                    <button onclick="exportPreset(2)" class="preset-export-btn">ğŸ“¤ æ›¸å‡º</button>
                    <button onclick="deletePreset(2)" style="background: #E74C3C;">ğŸ—‘ï¸</button>
                </div>
            </div>

            <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆ 3 -->
            <div class="preset-item">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <span style="font-weight: bold; width: 80px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ 3:</span>
                    <input type="text" id="presetName3" class="customize-input" placeholder="è¨­å®šåã‚’å…¥åŠ›" style="flex: 1;">
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="savePreset(3)" style="flex: 1; background: #2ECC71;">ğŸ’¾ ä¿å­˜</button>
                    <button onclick="loadPreset(3)" style="flex: 1; background: #3498DB;">ğŸ“¥ èª­è¾¼</button>
                    <button onclick="exportPreset(3)" class="preset-export-btn">ğŸ“¤ æ›¸å‡º</button>
                    <button onclick="deletePreset(3)" style="background: #E74C3C;">ğŸ—‘ï¸</button>
                </div>
            </div>

            <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆ 4 -->
            <div class="preset-item">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <span style="font-weight: bold; width: 80px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ 4:</span>
                    <input type="text" id="presetName4" class="customize-input" placeholder="è¨­å®šåã‚’å…¥åŠ›" style="flex: 1;">
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="savePreset(4)" style="flex: 1; background: #2ECC71;">ğŸ’¾ ä¿å­˜</button>
                    <button onclick="loadPreset(4)" style="flex: 1; background: #3498DB;">ğŸ“¥ èª­è¾¼</button>
                    <button onclick="exportPreset(4)" class="preset-export-btn">ğŸ“¤ æ›¸å‡º</button>
                    <button onclick="deletePreset(4)" style="background: #E74C3C;">ğŸ—‘ï¸</button>
                </div>
            </div>

            <!-- ãƒ—ãƒªã‚»ãƒƒãƒˆ 5 -->
            <div class="preset-item">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <span style="font-weight: bold; width: 80px;">ãƒ—ãƒªã‚»ãƒƒãƒˆ 5:</span>
                    <input type="text" id="presetName5" class="customize-input" placeholder="è¨­å®šåã‚’å…¥åŠ›" style="flex: 1;">
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="savePreset(5)" style="flex: 1; background: #2ECC71;">ğŸ’¾ ä¿å­˜</button>
                    <button onclick="loadPreset(5)" style="flex: 1; background: #3498DB;">ğŸ“¥ èª­è¾¼</button>
                    <button onclick="exportPreset(5)" class="preset-export-btn">ğŸ“¤ æ›¸å‡º</button>
                    <button onclick="deletePreset(5)" style="background: #E74C3C;">ğŸ—‘ï¸</button>
                </div>
            </div>
        </div>

        <!-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šç®¡ç† -->
        <div class="debug-section" style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #555;">
            <h4 style="color: #FFC107; margin-bottom: 15px;">â­ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šç®¡ç†</h4>
            <p style="opacity: 0.8; margin-bottom: 20px; font-size: 14px;">
                ç¾åœ¨ã®è¨­å®šã‚’èµ·å‹•æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ä¿å­˜ã§ãã¾ã™ã€‚æ¬¡å›èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚
            </p>
            <div style="display: flex; gap: 10px;">
                <button onclick="saveAsDefault()" style="flex: 1; background: #FF9800; padding: 15px; font-size: 16px;">
                    ğŸ’¾ ã“ã®è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã™ã‚‹
                </button>
                <button onclick="loadDefaultSettings()" style="flex: 1; background: #9C27B0; padding: 15px; font-size: 16px;">
                    ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’èª­ã¿è¾¼ã‚€
                </button>
                <button onclick="clearDefaultSettings()" style="background: #E74C3C; padding: 15px;">
                    ğŸ—‘ï¸ ã‚¯ãƒªã‚¢
                </button>
            </div>
        </div>
    </div>
</div>
</div>

<script>
    // ãƒ¢ãƒ¼ãƒ‰ç®¡ç†
    let isDebugMode = false;
    let apiUpdateInterval = null;
    let lastProductionResult = null;
    let currentPresetSlot = null;

    // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ID
    const SPREADSHEET_ID = '1RSd9aC5B_-gQ1_j5V1aQcZn1iVw9v8mpmhJ78_8gY80';
    const SHEET_NAME = 'ãƒ•ã‚©ãƒ¼ãƒ ã®å›ç­” 1';
    const API_URL = `https://docs.google.com/spreadsheets/d/${SPREADSHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;

    // ãƒ†ã‚¹ãƒˆç”¨ã®çŠ¶æ…‹ç®¡ç†
    const testState = {
        isAvailable: true,
        year: 2025,
        month: 11,
        day: 11,
        dayOfWeek: 2, // 0=æ—¥, 1=æœˆ, 2=ç«...
        hour: 14,
        minute: 0
    };

    // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã®çŠ¶æ…‹ç®¡ç†
    const customizeState = {
        clinicName: 'ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘',
        availableMsg: '{day}åˆ†ã®äºˆç´„æ  ã€Œç©ºãã€ã‚ã‚Š',
        fullMsg: '{day}ã®äºˆç´„ã¯ ã€Œæº€æ ã€ã§ã™',
        subMsg: 'èª ã«æã‚Œå…¥ã‚Šã¾ã™ãŒã€ç¿Œè¨ºç™‚æ—¥ä»¥é™ã§ ã”äºˆç´„ãã ã•ã„',
        qrMsg: 'å—ä»˜çª“å£ ã‚‚ã—ãã¯ QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰ ã”äºˆç´„ãã ã•ã„',
        availableIcon: 'â­•',
        fullIcon: 'ğŸ˜”',
        availableBg: '#27ae60',
        fullBg: '#dc3545',
        bannerBg: '#ffc107',
        bannerText: '#212529',
        // ã‚µã‚¤ã‚º
        iconSize: 12,
        mainMsgSize: 6,
        subMsgSize: 4.1,
        qrMsgSize: 4.6,
        updateTimeSize: 3,
        // ãƒãƒŠãƒ¼è¨­å®š
        openingSoonText: '10æ™‚ã«çª“å£ãŒé–‹ãã¾ã™ã€€ãŠå¾…ã¡ä¸‹ã•ã„',
        lunchBreakText: 'æ˜¼ä¼‘ã¿ä¸­ã€€åˆå¾Œï¼“æ™‚ã‚ˆã‚Šçª“å£ãŒé–‹ãã¾ã™',
        bannerFontSize: 2.8,
        bannerHeight: 115,
        bannerPadding: 0,
        // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š
        // ä½™ç™½ãƒ»é–“éš”
        iconToMainGap: 95,
        mainToSubGap: 60,
        subToQrGap: 5,
        qrToUpdateGap: 60,
        // ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
        mainMsgFontWeight: 900,
        subMsgFontWeight: 400,
        qrMsgFontWeight: 400,
        updateTimeFontWeight: 400,
        mainMsgLineHeight: 1.2,
        mainMsgLetterSpacing: 0,
        // ãƒ†ã‚­ã‚¹ãƒˆåŠ¹æœ
        textShadowEnabled: false,
        textShadowColor: '#000000',
        textShadowBlur: 5,
        textShadowDistance: 3,
        textStrokeEnabled: false,
        textStrokeColor: '#ffffff',
        textStrokeWidth: 2,
        // QRã‚³ãƒ¼ãƒ‰è¨­å®š
        qrEnabled: true,
        qrSize: 175,
        qrPosition: 'bottom-left',
        qrOpacity: 1,
        qrBorderRadius: 10,
        qrShadowEnabled: true,
        qrImageUrl: 'Downloads/QR_fujiminohikari.png',
        // ã‚¢ãƒ‹ãƒ¡1
        pulseEnabled: true,
        pulseSpeed: 3,
        pulseScale: 1.15,
        glowEnabled: true,
        glowIntensity: 'weak',
        glowColor: 'yellow',
        glowPulse: false,
        // ã‚¢ãƒ‹ãƒ¡2
        floatTarget: 'off',
        floatSpeed: 'slow',
        zoomTarget: 'icon',
        zoomSpeed: 'normal',
        sparkleEnabled: false,
        neonEnabled: false,
        neonSpeed: 'normal',
        screenEffect: 'none',
        // èƒŒæ™¯
        gradientEnabled: false,
        gradientType: 'diagonal',
        gradientColor1: '#27ae60',
        gradientColor2: '#1e8449',
        gradientAnimEnabled: false,
        // èƒŒæ™¯ç‚¹æ»…
        bgBlinkEnabled: false,
        bgBlinkSpeed: 'normal',
        bgBlinkIntensity: 0.3,
        bgBlinkPattern: 'pulse',
        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³
        faviconEnabled: true,
        faviconAvailableIcon: 'OK',
        faviconAvailableColor: '#4CAF50',
        faviconFullIcon: 'âœ•',
        faviconFullColor: '#F44336'
    };

    /**
     * ã‚¿ãƒ–ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
     */
    function switchTab(tabName) {
        // ã™ã¹ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹ã‚‰activeã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
        document.querySelectorAll('.debug-tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.debug-tab-content').forEach(content => content.classList.remove('active'));

        // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
        event.target.classList.add('active');
        document.getElementById('tab-' + tabName).classList.add('active');
    }

    /**
     * ã‚¢ã‚¤ã‚³ãƒ³ã‚’é¸æŠ
     */
    function selectIcon(type, icon) {
        if (type === 'available') {
            document.getElementById('customAvailableIcon').value = icon;
            customizeState.availableIcon = icon;
        } else if (type === 'full') {
            document.getElementById('customFullIcon').value = icon;
            customizeState.fullIcon = icon;
        }

        // é¸æŠçŠ¶æ…‹ã®ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«æ›´æ–°
        const buttons = event.target.parentElement.querySelectorAll('button');
        buttons.forEach(btn => btn.classList.remove('selected'));
        event.target.classList.add('selected');

        applyCustomizations();
    }

    /**
     * ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’é©ç”¨
     */
    function applyCustomizations() {
        // ãƒ†ã‚­ã‚¹ãƒˆ
        customizeState.clinicName = document.getElementById('customClinicName').value;
        customizeState.availableMsg = document.getElementById('customAvailableMsg').value;
        customizeState.fullMsg = document.getElementById('customFullMsg').value;
        customizeState.subMsg = document.getElementById('customSubMsg').value;
        customizeState.qrMsg = document.getElementById('customQrMsg').value;

        // ãƒãƒŠãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ
        if (document.getElementById('openingSoonText')) {
            customizeState.openingSoonText = document.getElementById('openingSoonText').value;
            customizeState.lunchBreakText = document.getElementById('lunchBreakText').value;
        }

        // ã‚¢ã‚¤ã‚³ãƒ³
        customizeState.availableIcon = document.getElementById('customAvailableIcon').value;
        customizeState.fullIcon = document.getElementById('customFullIcon').value;

        // è‰²
        customizeState.availableBg = document.getElementById('customAvailableBg').value;
        customizeState.fullBg = document.getElementById('customFullBg').value;
        customizeState.bannerBg = document.getElementById('customBannerBg').value;
        customizeState.bannerText = document.getElementById('customBannerText').value;

        // ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ã®å€¤è¡¨ç¤ºã‚’æ›´æ–°
        document.getElementById('availableBgValue').textContent = customizeState.availableBg;
        document.getElementById('fullBgValue').textContent = customizeState.fullBg;
        document.getElementById('bannerBgValue').textContent = customizeState.bannerBg;
        document.getElementById('bannerTextValue').textContent = customizeState.bannerText;

        // ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ›´æ–°
        if (isDebugMode) {
            updateDisplay();
        } else if (lastProductionResult) {
            displayStatusProduction(lastProductionResult.isAvailable, lastProductionResult.updateTime);
        } else {
            showLoadingState();
        }

    }

    /**
     * ãƒ•ã‚¡ãƒ“ã‚³ãƒ³æ©Ÿèƒ½ã®ON/OFF
     */
    function toggleFavicon(enabled) {
        customizeState.faviconEnabled = enabled;
        updateActiveButton('btnFaviconOn', 'btnFaviconOff', enabled);

        // è¨­å®šãƒ‘ãƒãƒ«ã®è¡¨ç¤º/éè¡¨ç¤º
        const settings = document.getElementById('faviconSettings');
        if (settings) {
            settings.style.display = enabled ? 'block' : 'none';
        }

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’æ›´æ–°
        updateFavicon();
    }

    /**
     * ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ã‚’é¸æŠï¼ˆãƒ—ãƒªã‚»ãƒƒãƒˆï¼‰
     */
    function selectFaviconIcon(type, icon) {
        if (type === 'available') {
            customizeState.faviconAvailableIcon = icon;
            document.getElementById('customFaviconAvailableIcon').value = icon;
        } else if (type === 'full') {
            customizeState.faviconFullIcon = icon;
            document.getElementById('customFaviconFullIcon').value = icon;
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
        updateFaviconPreview();

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’æ›´æ–°
        updateFavicon();
    }

    /**
     * ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚¢ã‚¤ã‚³ãƒ³ã‚’æ›´æ–°ï¼ˆã‚«ã‚¹ã‚¿ãƒ å…¥åŠ›ï¼‰
     */
    function updateFaviconIcon(type, icon) {
        if (type === 'available') {
            customizeState.faviconAvailableIcon = icon;
        } else if (type === 'full') {
            customizeState.faviconFullIcon = icon;
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
        updateFaviconPreview();

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’æ›´æ–°
        updateFavicon();
    }

    /**
     * ãƒ•ã‚¡ãƒ“ã‚³ãƒ³è‰²ã‚’æ›´æ–°
     */
    function updateFaviconColor(type, color) {
        if (type === 'available') {
            customizeState.faviconAvailableColor = color;
            document.getElementById('faviconAvailableColorValue').textContent = color;
        } else if (type === 'full') {
            customizeState.faviconFullColor = color;
            document.getElementById('faviconFullColorValue').textContent = color;
        }

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
        updateFaviconPreview();

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’æ›´æ–°
        updateFavicon();
    }

    /**
     * ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°
     */
    function updateFaviconPreview() {
        const availablePreview = document.getElementById('faviconAvailablePreview');
        const fullPreview = document.getElementById('faviconFullPreview');

        if (availablePreview) {
            availablePreview.style.color = customizeState.faviconAvailableColor;
            availablePreview.textContent = customizeState.faviconAvailableIcon || 'â—';
        }

        if (fullPreview) {
            fullPreview.style.color = customizeState.faviconFullColor;
            fullPreview.textContent = customizeState.faviconFullIcon || 'âœ—';
        }
    }

    /**
     * SVGãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’ç”Ÿæˆ
     */
    function generateFaviconSVG(isAvailable) {
        const icon = isAvailable ? customizeState.faviconAvailableIcon : customizeState.faviconFullIcon;
        const color = isAvailable ? customizeState.faviconAvailableColor : customizeState.faviconFullColor;

        // èƒŒæ™¯ã¯æŒ‡å®šè‰²ã®å››è§’å½¢
        // ãƒ†ã‚­ã‚¹ãƒˆã¯ç™½è‰²ã§ä¸­å¤®ã«è¡¨ç¤º
        const svg = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
            <rect width="32" height="32" fill="${color}"/>
            <text x="16" y="16" font-size="20" text-anchor="middle" dominant-baseline="central" fill="white" font-family="Arial, sans-serif" font-weight="bold">${icon}</text>
        </svg>`;

        return svg;
    }

    /**
     * ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’æ›´æ–°
     */
    function updateFavicon() {
        if (!customizeState.faviconEnabled) {
            return;
        }

        // ç¾åœ¨ã®è¡¨ç¤ºçŠ¶æ…‹ã‚’å–å¾—
        const container = document.querySelector('.display-container');
        const isAvailable = container && container.classList.contains('available');

        // SVGã‚’ç”Ÿæˆ
        const svg = generateFaviconSVG(isAvailable);

        // SVGã‚’Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰
        const base64 = btoa(unescape(encodeURIComponent(svg)));
        const faviconUrl = `data:image/svg+xml;base64,${base64}`;

        // æ—¢å­˜ã®ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’å‰Šé™¤
        const existingFavicon = document.querySelector('link[rel="icon"]');
        if (existingFavicon) {
            existingFavicon.remove();
        }

        // æ–°ã—ã„ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’è¿½åŠ 
        const link = document.createElement('link');
        link.rel = 'icon';
        link.type = 'image/svg+xml';
        link.href = faviconUrl;
        document.head.appendChild(link);
    }

    /**
     * ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ON/OFF
     */
    function togglePulse(enabled) {
        customizeState.pulseEnabled = enabled;
        updateActiveButton('btnPulseOn', 'btnPulseOff', enabled);
        updateAnimationStyle();
    }

    function getPulseSpeedLabel(speed) {
        const labels = {
            3: 'é…ã„ (3.0ç§’)',
            2: 'æ™®é€š (2.0ç§’)',
            1: 'é€Ÿã„ (1.0ç§’)'
        };
        if (labels[speed]) {
            return labels[speed];
        }
        const numeric = Number(speed);
        if (!Number.isFinite(numeric)) {
            return '--';
        }
        const formatted = Number.isInteger(numeric) ? numeric.toString() : numeric.toFixed(1).replace(/\.0$/, '');
        return `${formatted}ç§’`;
    }

    function updatePulseSpeedUI() {
        const value = customizeState.pulseSpeed;
        const numeric = Number(value);
        const label = document.getElementById('pulseSpeedValue');
        if (label) {
            label.textContent = getPulseSpeedLabel(value);
        }
        updateActiveButton3(
            'btnPulseSpeedSlow',
            'btnPulseSpeedNormal',
            'btnPulseSpeedFast',
            Math.abs(numeric - 3.0) < 0.001,
            Math.abs(numeric - 2.0) < 0.001,
            Math.abs(numeric - 1.0) < 0.001
        );
    }

    /**
     * ãƒ‘ãƒ«ã‚¹é€Ÿåº¦ã‚’æ›´æ–°
     */
    function updatePulseSpeed(value) {
        customizeState.pulseSpeed = parseFloat(value);
        updatePulseSpeedUI();
        updateActiveButton('btnPulseOn', 'btnPulseOff', customizeState.pulseEnabled);
        updateActiveButton('btnGlowOn', 'btnGlowOff', customizeState.glowEnabled);
        updateActiveButton('btnGlowPulseOn', 'btnGlowPulseOff', customizeState.glowPulse);
        updateActiveButton('btnGradientOn', 'btnGradientOff', customizeState.gradientEnabled);
        updateActiveButton('btnGradientAnimOn', 'btnGradientAnimOff', customizeState.gradientAnimEnabled);
        updateActiveButton4('btnFloatIcon', 'btnFloatText', 'btnFloatBoth', 'btnFloatOff',
            customizeState.floatTarget === 'icon',
            customizeState.floatTarget === 'text',
            customizeState.floatTarget === 'both',
            customizeState.floatTarget === 'off');
        updateActiveButton4('btnZoomIcon', 'btnZoomText', 'btnZoomBoth', 'btnZoomOff',
            customizeState.zoomTarget === 'icon',
            customizeState.zoomTarget === 'text',
            customizeState.zoomTarget === 'both',
            customizeState.zoomTarget === 'off');
        updateActiveButton4('btnScreenNone', 'btnScreenShakeV', 'btnScreenShakeH', 'btnScreenZoom',
            customizeState.screenEffect === 'none',
            customizeState.screenEffect === 'shakeV',
            customizeState.screenEffect === 'shakeH',
            customizeState.screenEffect === 'zoom');
        updateAnimationStyle();
    }

    /**
     * ãƒ‘ãƒ«ã‚¹æ‹¡å¤§ç‡ã‚’æ›´æ–°
     */
    function updatePulseScale(value) {
        customizeState.pulseScale = parseFloat(value);
        document.getElementById('pulseScaleValue').textContent = value;
        updateAnimationStyle();
    }

    /**
     * ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ON/OFF
     */
    function toggleFade(enabled) {
        customizeState.fadeEnabled = enabled;
        updateActiveButton('btnFadeOn', 'btnFadeOff', enabled);
        updateAnimationStyle();
    }

    /**
     * ã‚¯ãƒªãƒ‹ãƒƒã‚¯åã‚µã‚¤ã‚ºã‚’æ›´æ–°
     */
    function updateClinicSize(value) {
        customizeState.clinicSize = parseFloat(value);
        document.getElementById('clinicSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    /**
     * ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚ºã‚’æ›´æ–°
     */
    function updateIconSize(value) {
        customizeState.iconSize = parseFloat(value);
        document.getElementById('iconSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    /**
     * ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã‚’æ›´æ–°
     */
    function updateMainMsgSize(value) {
        customizeState.mainMsgSize = parseFloat(value);
        document.getElementById('mainMsgSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    /**
     * ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‹•çš„ã«æ›´æ–°
     */
    function updateAnimationStyle() {
        // æ—¢å­˜ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ã‚°ã‚’å‰Šé™¤
        const existingStyle = document.getElementById('dynamic-animation-style');
        if (existingStyle) {
            existingStyle.remove();
        }

        // æ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ«ã‚¿ã‚°ã‚’ä½œæˆ
        const style = document.createElement('style');
        style.id = 'dynamic-animation-style';

        let css = '';

        // ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        if (customizeState.pulseEnabled) {
            css += `
                .icon {
                    animation: pulse ${customizeState.pulseSpeed}s ease-in-out infinite !important;
                }
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(${customizeState.pulseScale}); }
                    100% { transform: scale(1); }
                }
            `;
        } else {
            css += `
                .icon {
                    animation: none !important;
                }
            `;
        }

        style.textContent = css;
        document.head.appendChild(style);
    }

    /**
     * ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºã‚’å‹•çš„ã«é©ç”¨
     */
    function applyFontSizes() {
        const existingStyle = document.getElementById('dynamic-fontsize-style');
        if (existingStyle) {
            existingStyle.remove();
        }

        const style = document.createElement('style');
        style.id = 'dynamic-fontsize-style';

        const minIcon = Math.max(120, customizeState.iconSize * 12);
        const maxIcon = Math.min(200, customizeState.iconSize * 20);

        const minMain = Math.max(60, customizeState.mainMsgSize * 10);
        const maxMain = Math.min(120, customizeState.mainMsgSize * 20);

        const minSub = Math.max(28, customizeState.subMsgSize * 10);
        const maxSub = Math.min(56, customizeState.subMsgSize * 18);

        const minQr = Math.max(32, customizeState.qrMsgSize * 10);
        const maxQr = Math.min(64, customizeState.qrMsgSize * 18);

        const minUpdate = Math.max(20, customizeState.updateTimeSize * 10);
        const maxUpdate = Math.min(40, customizeState.updateTimeSize * 20);

        style.textContent = `
            .icon {
                font-size: clamp(${minIcon}px, ${customizeState.iconSize}vw, ${maxIcon}px) !important;
            }
            .main-message {
                font-size: clamp(${minMain}px, ${customizeState.mainMsgSize}vw, ${maxMain}px) !important;
            }
            .sub-message {
                font-size: clamp(${minSub}px, ${customizeState.subMsgSize}vw, ${maxSub}px) !important;
            }
            .qr-message {
                font-size: clamp(${minQr}px, ${customizeState.qrMsgSize}vw, ${maxQr}px) !important;
            }
            .update-time {
                font-size: clamp(${minUpdate}px, ${customizeState.updateTimeSize}vw, ${maxUpdate}px) !important;
            }
        `;

        document.head.appendChild(style);
    }

    /**
     * ã‚µã‚¤ã‚ºæ›´æ–°é–¢æ•°
     */
    function updateIconSize(value) {
        customizeState.iconSize = parseFloat(value);
        document.getElementById('iconSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    function updateMainMsgSize(value) {
        customizeState.mainMsgSize = parseFloat(value);
        document.getElementById('mainMsgSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    function updateSubMsgSize(value) {
        customizeState.subMsgSize = parseFloat(value);
        document.getElementById('subMsgSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    function updateQrMsgSize(value) {
        customizeState.qrMsgSize = parseFloat(value);
        document.getElementById('qrMsgSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    function updateTimeSize(value) {
        customizeState.updateTimeSize = parseFloat(value);
        document.getElementById('updateTimeSizeValue').textContent = value + 'vw';
        applyFontSizes();
    }

    /**
     * ãƒãƒŠãƒ¼è¨­å®šæ›´æ–°é–¢æ•°
     */
    function updateBannerFontSize(value) {
        customizeState.bannerFontSize = parseFloat(value);
        document.getElementById('bannerFontSizeValue').textContent = value + 'vw';
        applyBannerSettings();
    }

    function updateBannerHeight(value) {
        customizeState.bannerHeight = parseInt(value);
        document.getElementById('bannerHeightValue').textContent = value + 'px';
        applyBannerSettings();
    }

    function updateBannerPadding(value) {
        customizeState.bannerPadding = parseInt(value);
        document.getElementById('bannerPaddingValue').textContent = value + 'px';
        applyBannerSettings();
    }

    function applyBannerSettings() {
        const openingSoonBanner = document.getElementById('openingSoonBanner');
        const lunchBreakBanner = document.getElementById('lunchBreakBanner');

        // ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°
        customizeState.openingSoonText = document.getElementById('openingSoonText').value;
        customizeState.lunchBreakText = document.getElementById('lunchBreakText').value;

        openingSoonBanner.textContent = customizeState.openingSoonText;
        lunchBreakBanner.textContent = customizeState.lunchBreakText;

        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°
        const banners = [openingSoonBanner, lunchBreakBanner];
        banners.forEach(banner => {
            banner.style.fontSize = customizeState.bannerFontSize + 'vw';
            banner.style.height = customizeState.bannerHeight + 'px';
            banner.style.padding = customizeState.bannerPadding + 'px 20px';
        });
    }

    /**
     * ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®šæ›´æ–°é–¢æ•°
     */
    // ä½™ç™½ãƒ»é–“éš”
    function updateIconToMainGap(value) {
        customizeState.iconToMainGap = parseInt(value);
        document.getElementById('iconToMainGapValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    function updateMainToSubGap(value) {
        customizeState.mainToSubGap = parseInt(value);
        document.getElementById('mainToSubGapValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    function updateSubToQrGap(value) {
        customizeState.subToQrGap = parseInt(value);
        document.getElementById('subToQrGapValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    function updateQrToUpdateGap(value) {
        customizeState.qrToUpdateGap = parseInt(value);
        document.getElementById('qrToUpdateGapValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    // ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
    function setMainMsgFontWeight(weight) {
        customizeState.mainMsgFontWeight = weight;
        const labels = { 400: 'æ¨™æº–', 700: 'å¤ªå­—', 900: 'æ¥µå¤ª' };
        document.getElementById('mainMsgFontWeightValue').textContent = labels[weight];
        applyLayoutSettings();
    }

    function setSubMsgFontWeight(weight) {
        customizeState.subMsgFontWeight = weight;
        const labels = { 400: 'æ¨™æº–', 700: 'å¤ªå­—', 900: 'æ¥µå¤ª' };
        document.getElementById('subMsgFontWeightValue').textContent = labels[weight];
        applyLayoutSettings();
    }

    function setQrMsgFontWeight(weight) {
        customizeState.qrMsgFontWeight = weight;
        const labels = { 400: 'æ¨™æº–', 700: 'å¤ªå­—', 900: 'æ¥µå¤ª' };
        document.getElementById('qrMsgFontWeightValue').textContent = labels[weight];
        applyLayoutSettings();
    }

    function setUpdateTimeFontWeight(weight) {
        customizeState.updateTimeFontWeight = weight;
        const labels = { 400: 'æ¨™æº–', 700: 'å¤ªå­—', 900: 'æ¥µå¤ª' };
        document.getElementById('updateTimeFontWeightValue').textContent = labels[weight];
        applyLayoutSettings();
    }

    function updateMainMsgLineHeight(value) {
        customizeState.mainMsgLineHeight = parseFloat(value);
        document.getElementById('mainMsgLineHeightValue').textContent = value;
        applyLayoutSettings();
    }

    function updateMainMsgLetterSpacing(value) {
        customizeState.mainMsgLetterSpacing = parseInt(value);
        document.getElementById('mainMsgLetterSpacingValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    // ãƒ†ã‚­ã‚¹ãƒˆåŠ¹æœ
    function toggleTextShadow(enabled) {
        customizeState.textShadowEnabled = enabled;
        updateActiveButton('btnTextShadowOn', 'btnTextShadowOff', enabled);
        applyLayoutSettings();
    }

    function updateTextShadowBlur(value) {
        customizeState.textShadowBlur = parseInt(value);
        document.getElementById('textShadowBlurValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    function updateTextShadowDistance(value) {
        customizeState.textShadowDistance = parseInt(value);
        document.getElementById('textShadowDistanceValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    function toggleTextStroke(enabled) {
        customizeState.textStrokeEnabled = enabled;
        updateActiveButton('btnTextStrokeOn', 'btnTextStrokeOff', enabled);
        applyLayoutSettings();
    }

    function updateTextStrokeWidth(value) {
        customizeState.textStrokeWidth = parseInt(value);
        document.getElementById('textStrokeWidthValue').textContent = value + 'px';
        applyLayoutSettings();
    }

    /**
     * ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®šã‚’é©ç”¨
     */
    function applyLayoutSettings() {
        // ã‚«ãƒ©ãƒ¼å€¤ã‚’å–å¾—
        customizeState.textShadowColor = document.getElementById('textShadowColor').value;
        customizeState.textStrokeColor = document.getElementById('textStrokeColor').value;

        // å‹•çš„ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½œæˆ
        let styleId = 'dynamic-layout-style';
        let existingStyle = document.getElementById(styleId);
        if (existingStyle) {
            existingStyle.remove();
        }

        const style = document.createElement('style');
        style.id = styleId;

        // ãƒ†ã‚­ã‚¹ãƒˆã‚·ãƒ£ãƒ‰ã‚¦
        let textShadow = 'none';
        if (customizeState.textShadowEnabled) {
            textShadow = `${customizeState.textShadowDistance}px ${customizeState.textShadowDistance}px ${customizeState.textShadowBlur}px ${customizeState.textShadowColor}`;
        }

        // ãƒ†ã‚­ã‚¹ãƒˆã‚¹ãƒˆãƒ­ãƒ¼ã‚¯
        let textStroke = '';
        if (customizeState.textStrokeEnabled) {
            textStroke = `-webkit-text-stroke: ${customizeState.textStrokeWidth}px ${customizeState.textStrokeColor};`;
        }

        style.textContent = `
            .icon {
                margin-bottom: ${customizeState.iconToMainGap}px !important;
            }
            .main-message {
                margin-bottom: ${customizeState.mainToSubGap}px !important;
                font-weight: ${customizeState.mainMsgFontWeight} !important;
                line-height: ${customizeState.mainMsgLineHeight} !important;
                letter-spacing: ${customizeState.mainMsgLetterSpacing}px !important;
                text-shadow: ${textShadow} !important;
                ${textStroke}
            }
            .sub-message {
                margin-bottom: ${customizeState.subToQrGap}px !important;
                font-weight: ${customizeState.subMsgFontWeight} !important;
                text-shadow: ${textShadow} !important;
                ${textStroke}
            }
            .qr-message {
                margin-bottom: ${customizeState.qrToUpdateGap}px !important;
                font-weight: ${customizeState.qrMsgFontWeight} !important;
                text-shadow: ${textShadow} !important;
                ${textStroke}
            }
            .update-time {
                font-weight: ${customizeState.updateTimeFontWeight} !important;
                text-shadow: ${textShadow} !important;
                ${textStroke}
            }
        `;

        document.head.appendChild(style);
    }

    /**
     * QRã‚³ãƒ¼ãƒ‰è¨­å®šæ›´æ–°é–¢æ•°
     */
    function toggleQr(enabled) {
        customizeState.qrEnabled = enabled;
        updateActiveButton('btnQrOn', 'btnQrOff', enabled);
        document.getElementById('qrSettings').style.display = enabled ? 'block' : 'none';
        applyQRSettings();
    }

    function updateQrSize(value) {
        customizeState.qrSize = parseInt(value);
        document.getElementById('qrSizeValue').textContent = value + 'px';
        applyQRSettings();
    }

    function updateQrOpacity(value) {
        customizeState.qrOpacity = parseFloat(value) / 100;
        document.getElementById('qrOpacityValue').textContent = value + '%';
        applyQRSettings();
    }

    function updateQrBorderRadius(value) {
        customizeState.qrBorderRadius = parseInt(value);
        document.getElementById('qrBorderRadiusValue').textContent = value + 'px';
        applyQRSettings();
    }

    function toggleQrShadow(enabled) {
        customizeState.qrShadowEnabled = enabled;
        updateActiveButton('btnQrShadowOn', 'btnQrShadowOff', enabled);
        applyQRSettings();
    }

    function applyQRSettings() {
        const qrCodeCorner = document.querySelector('.qr-code-corner');
        const qrImg = qrCodeCorner.querySelector('img');

        // URLã‚’æ›´æ–°
        customizeState.qrImageUrl = document.getElementById('qrImageUrl').value;
        qrImg.src = customizeState.qrImageUrl;

        // ä½ç½®ã‚’æ›´æ–°
        customizeState.qrPosition = document.getElementById('qrPosition').value;

        // ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
        qrCodeCorner.style.top = 'auto';
        qrCodeCorner.style.bottom = 'auto';
        qrCodeCorner.style.left = 'auto';
        qrCodeCorner.style.right = 'auto';

        if (customizeState.qrEnabled && customizeState.qrPosition !== 'hidden') {
            qrCodeCorner.style.display = 'block';

            // ä½ç½®ã«å¿œã˜ã¦é…ç½®
            const offset = '20px';
            switch (customizeState.qrPosition) {
                case 'bottom-left':
                    qrCodeCorner.style.bottom = offset;
                    qrCodeCorner.style.left = offset;
                    break;
                case 'bottom-right':
                    qrCodeCorner.style.bottom = offset;
                    qrCodeCorner.style.right = offset;
                    break;
                case 'top-left':
                    qrCodeCorner.style.top = offset;
                    qrCodeCorner.style.left = offset;
                    break;
                case 'top-right':
                    qrCodeCorner.style.top = offset;
                    qrCodeCorner.style.right = offset;
                    break;
            }

            // ã‚µã‚¤ã‚ºã¨è¦‹ãŸç›®ã‚’æ›´æ–°
            qrImg.style.width = customizeState.qrSize + 'px';
            qrImg.style.height = customizeState.qrSize + 'px';
            qrImg.style.opacity = customizeState.qrOpacity;
            qrImg.style.borderRadius = customizeState.qrBorderRadius + 'px';
            qrImg.style.boxShadow = customizeState.qrShadowEnabled
                ? '0 4px 8px rgba(0, 0, 0, 0.3)'
                : 'none';
        } else {
            qrCodeCorner.style.display = 'none';
        }
    }

    /**
     * ãƒ‘ãƒ«ã‚¹é€Ÿåº¦è¨­å®šï¼ˆãƒœã‚¿ãƒ³ç‰ˆï¼‰
     */
    function setPulseSpeed(speed) {
        const speeds = { slow: 3.0, normal: 2.0, fast: 1.0 };
        customizeState.pulseSpeed = speeds[speed];
        updatePulseSpeedUI();
        updateAnimationStyle();
    }

    /**
     * ãƒ†ã‚­ã‚¹ãƒˆã‚°ãƒ­ãƒ¼ ON/OFF
     */
    function toggleGlow(enabled) {
        customizeState.glowEnabled = enabled;
        updateActiveButton('btnGlowOn', 'btnGlowOff', enabled);
        updateEffectsStyle();
    }

    /**
     * ã‚°ãƒ­ãƒ¼å¼·åº¦è¨­å®š
     */
    function setGlowIntensity(intensity) {
        customizeState.glowIntensity = intensity;
        const labels = { weak: 'å¼±', medium: 'ä¸­', strong: 'å¼·' };
        document.getElementById('glowIntensityValue').textContent = labels[intensity];
        updateEffectsStyle();
    }

    /**
     * ã‚°ãƒ­ãƒ¼è‰²è¨­å®š
     */
    function setGlowColor(color) {
        customizeState.glowColor = color;
        updateEffectsStyle();
    }

    /**
     * ã‚°ãƒ­ãƒ¼ãƒ‘ãƒ«ã‚¹ ON/OFF
     */
    function toggleGlowPulse(enabled) {
        customizeState.glowPulse = enabled;
        updateActiveButton('btnGlowPulseOn', 'btnGlowPulseOff', enabled);
        updateEffectsStyle();
    }

    /**
     * èƒŒæ™¯ç‚¹æ»…ã®ON/OFF
     */
    function toggleBgBlink(enabled) {
        customizeState.bgBlinkEnabled = enabled;
        updateActiveButton('btnBgBlinkOn', 'btnBgBlinkOff', enabled);
        applyBgBlinkEffect();
    }

    /**
     * èƒŒæ™¯ç‚¹æ»…ã®é€Ÿåº¦è¨­å®š
     */
    function setBgBlinkSpeed(speed) {
        customizeState.bgBlinkSpeed = speed;
        const speedLabels = { slow: 'é…ã„ (3.0ç§’)', normal: 'æ™®é€š (1.5ç§’)', fast: 'é€Ÿã„ (0.8ç§’)' };
        document.getElementById('bgBlinkSpeedValue').textContent = speedLabels[speed];

        document.getElementById('btnBgBlinkSpeedSlow').classList.remove('active');
        document.getElementById('btnBgBlinkSpeedNormal').classList.remove('active');
        document.getElementById('btnBgBlinkSpeedFast').classList.remove('active');
        document.getElementById('btnBgBlinkSpeed' + speed.charAt(0).toUpperCase() + speed.slice(1)).classList.add('active');

        applyBgBlinkEffect();
    }

    /**
     * èƒŒæ™¯ç‚¹æ»…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³è¨­å®š
     */
    function setBgBlinkPattern(pattern) {
        customizeState.bgBlinkPattern = pattern;
        const patternLabels = { pulse: 'ãªã‚ã‚‰ã‹', flash: 'ãƒ‘ãƒãƒ‘ãƒ' };
        document.getElementById('bgBlinkPatternValue').textContent = patternLabels[pattern];

        document.getElementById('btnBgBlinkPatternPulse').classList.remove('active');
        document.getElementById('btnBgBlinkPatternFlash').classList.remove('active');
        document.getElementById('btnBgBlinkPattern' + pattern.charAt(0).toUpperCase() + pattern.slice(1)).classList.add('active');

        applyBgBlinkEffect();
    }

    /**
     * èƒŒæ™¯ç‚¹æ»…ã®æš—ã•èª¿æ•´
     */
    function updateBgBlinkIntensity(value) {
        customizeState.bgBlinkIntensity = parseFloat(value);
        document.getElementById('bgBlinkIntensityValue').textContent = value;
        applyBgBlinkEffect();
    }

    /**
     * èƒŒæ™¯ç‚¹æ»…ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’é©ç”¨
     */
    function applyBgBlinkEffect() {
        const container = document.getElementById('displayContainer');
        if (!container) return;

        // CSSå¤‰æ•°ã§æš—ã•ã‚’è¨­å®šï¼ˆ1 - intensity ã§ brightnesså€¤ã«å¤‰æ›ï¼‰
        const brightnessValue = 1 - customizeState.bgBlinkIntensity;
        container.style.setProperty('--blink-intensity', brightnessValue);

        if (customizeState.bgBlinkEnabled) {
            const speedValues = { slow: '3s', normal: '1.5s', fast: '0.8s' };
            const duration = speedValues[customizeState.bgBlinkSpeed];
            const animationName = customizeState.bgBlinkPattern === 'pulse' ? 'bgBlink' : 'bgFlash';
            container.style.animation = `${animationName} ${duration} ease-in-out infinite`;
        } else {
            // ä»–ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ï¼‰ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã€èƒŒæ™¯ç‚¹æ»…ã®ã¿è§£é™¤
            const currentAnim = container.style.animation || '';
            if (currentAnim.includes('bgBlink') || currentAnim.includes('bgFlash')) {
                container.style.animation = '';
            }
        }
    }

    /**
     * ============================================
     * ã‚¢ãƒ‹ãƒ¡2é–¢æ•°
     * ============================================
     */

    /**
     * ãµã‚ãµã‚æµ®éŠè¨­å®š
     */
    function setFloatTarget(target) {
        customizeState.floatTarget = target;
        updateActiveButton4('btnFloatIcon', 'btnFloatText', 'btnFloatBoth', 'btnFloatOff',
            target === 'icon', target === 'text', target === 'both', target === 'off');
        updateAnimation2Style();
    }

    function setFloatSpeed(speed) {
        customizeState.floatSpeed = speed;
        updateAnimation2Style();
    }

    /**
     * æ‹¡å¤§ç¸®å°è¨­å®š
     */
    function setZoomTarget(target) {
        customizeState.zoomTarget = target;
        updateActiveButton4('btnZoomIcon', 'btnZoomText', 'btnZoomBoth', 'btnZoomOff',
            target === 'icon', target === 'text', target === 'both', target === 'off');
        updateAnimation2Style();
    }

    function setZoomSpeed(speed) {
        customizeState.zoomSpeed = speed;
        updateAnimation2Style();
    }

    /**
     * ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
     */
    function toggleSparkle(enabled) {
        customizeState.sparkleEnabled = enabled;
        updateActiveButton('btnSparkleOn', 'btnSparkleOff', enabled);
        updateAnimation2Style();
    }

    /**
     * ãƒã‚ªãƒ³ç‚¹æ»…
     */
    function toggleNeon(enabled) {
        customizeState.neonEnabled = enabled;
        updateActiveButton('btnNeonOn', 'btnNeonOff', enabled);
        updateAnimation2Style();
    }

    function setNeonSpeed(speed) {
        customizeState.neonSpeed = speed;
        updateAnimation2Style();
    }

    /**
     * ç”»é¢å…¨ä½“ã®å‹•ã
     */
    function setScreenEffect(effect) {
        customizeState.screenEffect = effect;
        updateActiveButton4('btnScreenNone', 'btnScreenShakeV', 'btnScreenShakeH', 'btnScreenZoom',
            effect === 'none', effect === 'shakeV', effect === 'shakeH', effect === 'zoom');
        updateAnimation2Style();
    }

    /**
     * 3ãƒœã‚¿ãƒ³ç”¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°
     */
    function updateActiveButton3(btn1Id, btn2Id, btn3Id, active1, active2, active3) {
        const btn1 = document.getElementById(btn1Id);
        const btn2 = document.getElementById(btn2Id);
        const btn3 = document.getElementById(btn3Id);
        if (btn1) btn1.classList.toggle('active', active1);
        if (btn2) btn2.classList.toggle('active', active2);
        if (btn3) btn3.classList.toggle('active', active3);
    }

    /**
     * 4ãƒœã‚¿ãƒ³ç”¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ›´æ–°
     */
    function updateActiveButton4(btn1Id, btn2Id, btn3Id, btn4Id, active1, active2, active3, active4) {
        const btn1 = document.getElementById(btn1Id);
        const btn2 = document.getElementById(btn2Id);
        const btn3 = document.getElementById(btn3Id);
        const btn4 = document.getElementById(btn4Id);
        if (btn1) btn1.classList.toggle('active', active1);
        if (btn2) btn2.classList.toggle('active', active2);
        if (btn3) btn3.classList.toggle('active', active3);
        if (btn4) btn4.classList.toggle('active', active4);
    }

    /**
     * ã‚¢ãƒ‹ãƒ¡2ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‹•çš„ã«æ›´æ–°
     */
    function updateAnimation2Style() {
        const existingStyle = document.getElementById('dynamic-animation2-style');
        if (existingStyle) {
            existingStyle.remove();
        }

        const style = document.createElement('style');
        style.id = 'dynamic-animation2-style';
        let css = '';

        // ãµã‚ãµã‚æµ®éŠ
        if (customizeState.floatTarget !== 'off') {
            const speeds = { slow: '4s', normal: '3s', fast: '2s' };
            const speed = speeds[customizeState.floatSpeed];
            const selector = customizeState.floatTarget === 'icon' ? '.icon' :
                           customizeState.floatTarget === 'text' ? '.main-message' :
                           '.icon, .main-message';
            css += `
                ${selector} {
                    animation: float ${speed} ease-in-out infinite !important;
                }
                @keyframes float {
                    0%, 100% { transform: translateY(0px); }
                    50% { transform: translateY(-20px); }
                }
            `;
        }

        // æ‹¡å¤§ç¸®å°
        if (customizeState.zoomTarget !== 'off') {
            const speeds = { slow: '4s', normal: '3s', fast: '2s' };
            const speed = speeds[customizeState.zoomSpeed];
            const selector = customizeState.zoomTarget === 'icon' ? '.icon' :
                           customizeState.zoomTarget === 'text' ? '.main-message' :
                           '.icon, .main-message';
            css += `
                ${selector} {
                    animation: zoom ${speed} ease-in-out infinite !important;
                }
                @keyframes zoom {
                    0%, 100% { transform: scale(1); }
                    50% { transform: scale(1.1); }
                }
            `;
        }

        // ã‚­ãƒ©ã‚­ãƒ©ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
        if (customizeState.sparkleEnabled) {
            css += `
                .main-message {
                    animation: sparkle 1.5s ease-in-out infinite !important;
                }
                @keyframes sparkle {
                    0%, 100% { filter: brightness(1) drop-shadow(0 0 0px white); }
                    50% { filter: brightness(1.3) drop-shadow(0 0 10px white); }
                }
            `;
        }

        // ãƒã‚ªãƒ³ç‚¹æ»…
        if (customizeState.neonEnabled) {
            const speeds = { slow: '3s', normal: '2s', fast: '1s' };
            const speed = speeds[customizeState.neonSpeed];
            css += `
                .main-message {
                    animation: neonBlink ${speed} ease-in-out infinite !important;
                }
                @keyframes neonBlink {
                    0%, 100% { opacity: 1; text-shadow: 0 0 20px currentColor, 0 0 40px currentColor; }
                    50% { opacity: 0.7; text-shadow: 0 0 10px currentColor; }
                }
            `;
        }

        // ç”»é¢å…¨ä½“ã®å‹•ã
        if (customizeState.screenEffect !== 'none') {
            if (customizeState.screenEffect === 'shakeV') {
                css += `
                    .display-container {
                        animation: shakeVertical 4s ease-in-out infinite !important;
                    }
                    @keyframes shakeVertical {
                        0%, 100% { transform: translateY(0); }
                        50% { transform: translateY(-15px); }
                    }
                `;
            } else if (customizeState.screenEffect === 'shakeH') {
                css += `
                    .display-container {
                        animation: shakeHorizontal 4s ease-in-out infinite !important;
                    }
                    @keyframes shakeHorizontal {
                        0%, 100% { transform: translateX(0); }
                        50% { transform: translateX(-15px); }
                    }
                `;
            } else if (customizeState.screenEffect === 'zoom') {
                css += `
                    .display-container {
                        animation: screenZoom 5s ease-in-out infinite !important;
                    }
                    @keyframes screenZoom {
                        0%, 100% { transform: scale(1); }
                        50% { transform: scale(1.05); }
                    }
                `;
            }
        }

        style.textContent = css;
        document.head.appendChild(style);
    }

    /**
     * ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ ON/OFF
     */
    function toggleGradient(enabled) {
        customizeState.gradientEnabled = enabled;
        updateActiveButton('btnGradientOn', 'btnGradientOff', enabled);
        applyGradient();
    }

    /**
     * ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç¨®é¡è¨­å®š
     */
    function setGradientType(type) {
        customizeState.gradientType = type;
        const labels = { diagonal: 'æ–œã‚', radial: 'æ”¾å°„çŠ¶', horizontal: 'æ¨ª', vertical: 'ç¸¦' };
        document.getElementById('gradientTypeValue').textContent = labels[type];
        applyGradient();
    }

    /**
     * ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
     */
    function applyGradient() {
        customizeState.gradientColor1 = document.getElementById('customGradientColor1').value;
        customizeState.gradientColor2 = document.getElementById('customGradientColor2').value;
        document.getElementById('gradientColor1Value').textContent = customizeState.gradientColor1;
        document.getElementById('gradientColor2Value').textContent = customizeState.gradientColor2;
        updateBackgroundStyle();
    }

    /**
     * ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ ON/OFF
     */
    function toggleGradientAnim(enabled) {
        customizeState.gradientAnimEnabled = enabled;
        updateActiveButton('btnGradientAnimOn', 'btnGradientAnimOff', enabled);
        updateBackgroundStyle();
    }

    /**
     * ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‹•çš„ã«æ›´æ–°
     */
    function updateEffectsStyle() {
        const existingStyle = document.getElementById('dynamic-effects-style');
        if (existingStyle) {
            existingStyle.remove();
        }

        const style = document.createElement('style');
        style.id = 'dynamic-effects-style';
        let css = '';

        // ãƒ†ã‚­ã‚¹ãƒˆã‚°ãƒ­ãƒ¼
        if (customizeState.glowEnabled) {
            const intensities = {
                weak: '0 0 10px, 0 0 20px',
                medium: '0 0 20px, 0 0 40px, 0 0 60px',
                strong: '0 0 30px, 0 0 60px, 0 0 90px, 0 0 120px'
            };
            const colors = {
                white: 'rgba(255, 255, 255, 0.8)',
                yellow: 'rgba(255, 215, 0, 0.9)',
                cyan: 'rgba(0, 255, 255, 0.9)',
                lime: 'rgba(0, 255, 0, 0.9)',
                rainbow: 'hsl(0, 100%, 50%)'
            };

            const glowColor = colors[customizeState.glowColor];
            const glowIntensity = intensities[customizeState.glowIntensity];

            if (customizeState.glowPulse && customizeState.glowColor === 'rainbow') {
                css += `
                    .main-message {
                        text-shadow: ${glowIntensity.split(',').map(s => s + ' ' + glowColor).join(',')};
                        animation: rainbowGlow 3s linear infinite !important;
                    }
                    @keyframes rainbowGlow {
                        0% { filter: hue-rotate(0deg) brightness(1.2); }
                        100% { filter: hue-rotate(360deg) brightness(1.2); }
                    }
                `;
            } else if (customizeState.glowPulse) {
                css += `
                    .main-message {
                        animation: textGlowPulse 2s ease-in-out infinite !important;
                    }
                    @keyframes textGlowPulse {
                        0%, 100% { text-shadow: ${glowIntensity.split(',').map(s => s + ' ' + glowColor).join(',')}; }
                        50% { text-shadow: 0 0 5px ${glowColor}; }
                    }
                `;
            } else {
                css += `
                    .main-message {
                        text-shadow: ${glowIntensity.split(',').map(s => s + ' ' + glowColor).join(',')} !important;
                    }
                `;
            }
        }

        style.textContent = css;
        document.head.appendChild(style);
    }

    /**
     * èƒŒæ™¯ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‹•çš„ã«æ›´æ–°
     */
    function updateBackgroundStyle() {
        updateDisplay(); // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ updateDisplay ã§é©ç”¨
    }

    /**
     * ç¾åœ¨ã®è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³ç”¨ï¼‰
     */
    function exportCurrentSettings() {
        const exportData = {
            name: "ç¾åœ¨ã®è¨­å®š",
            version: "1.0",
            exportedAt: new Date().toISOString(),
            settings: JSON.parse(JSON.stringify(customizeState))
        };

        const filename = `display-preset-ç¾åœ¨ã®è¨­å®š-${new Date().toISOString().slice(0, 10)}.json`;
        downloadJSON(exportData, filename);

        alert('âœ… ç¾åœ¨ã®è¨­å®šã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼');
    }

    /**
     * ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
     */
    function exportPreset(slotNumber) {
        const presetData = localStorage.getItem(`displayPreset${slotNumber}`);

        if (!presetData) {
            alert('âŒ ã“ã®ã‚¹ãƒ­ãƒƒãƒˆã«ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“');
            return;
        }

        const preset = JSON.parse(presetData);

        const exportData = {
            name: preset.name,
            version: "1.0",
            exportedAt: new Date().toISOString(),
            originalSavedAt: preset.savedAt,
            settings: preset.state
        };

        const filename = `display-preset-${preset.name}-${new Date().toISOString().slice(0, 10)}.json`;
        downloadJSON(exportData, filename);

        alert(`âœ… ã€Œ${preset.name}ã€ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼`);
    }

    /**
     * ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‹ã
     */
    function triggerImport() {
        document.getElementById('importFileInput').click();
    }

    /**
     * ã‚¤ãƒ³ãƒãƒ¼ãƒˆå‡¦ç†
     */
    function importSettings(event) {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const importData = JSON.parse(e.target.result);

                // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯
                if (!importData.version || !importData.settings) {
                    throw new Error('ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã™');
                }

                // è¨­å®šã‚’é©ç”¨
                Object.assign(customizeState, importData.settings);
                applyCustomizationsFromState();

                // ç¾åœ¨ã®ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã‚¯ãƒªã‚¢
                currentPresetSlot = null;
                updateCurrentPresetInfo();

                alert(`âœ… ã€Œ${importData.name}ã€ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼\n\nã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ—¥æ™‚: ${new Date(importData.exportedAt).toLocaleString('ja-JP')}`);
            } catch (error) {
                console.error('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼:', error);
                alert(`âŒ ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ\n\nã‚¨ãƒ©ãƒ¼: ${error.message}`);
            }
        };
        reader.readAsText(file);

        // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆåŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†é¸æŠå¯èƒ½ã«ã™ã‚‹ï¼‰
        event.target.value = '';
    }

    /**
     * JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
     */
    function downloadJSON(data, filename) {
        const json = JSON.stringify(data, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    /**
     * ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ä¿å­˜
     */
    function savePreset(slotNumber) {
        const nameInput = document.getElementById(`presetName${slotNumber}`);
        const presetName = nameInput.value.trim() || `ãƒ—ãƒªã‚»ãƒƒãƒˆ ${slotNumber}`;

        // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¹ãƒ†ãƒ¼ãƒˆã‚’ä¿å­˜
        const presetData = {
            name: presetName,
            state: JSON.parse(JSON.stringify(customizeState)),
            savedAt: new Date().toISOString()
        };

        localStorage.setItem(`displayPreset${slotNumber}`, JSON.stringify(presetData));

        // åå‰ã‚’æ›´æ–°
        nameInput.value = presetName;

        // ç¾åœ¨ã®è¨­å®šã‚’æ›´æ–°
        currentPresetSlot = slotNumber;
        updateCurrentPresetInfo();

        alert(`âœ… ã€Œ${presetName}ã€ã¨ã—ã¦ä¿å­˜ã—ã¾ã—ãŸï¼`);
    }

    /**
     * ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’èª­ã¿è¾¼ã¿
     */
    function loadPreset(slotNumber) {
        const presetData = localStorage.getItem(`displayPreset${slotNumber}`);

        if (!presetData) {
            alert('âŒ ã“ã®ã‚¹ãƒ­ãƒƒãƒˆã«ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“');
            return;
        }

        const preset = JSON.parse(presetData);

        // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚¹ãƒ†ãƒ¼ãƒˆã‚’å¾©å…ƒ
        Object.assign(customizeState, preset.state);

        // UIã‚’æ›´æ–°
        applyCustomizationsFromState();

        // ç¾åœ¨ã®è¨­å®šã‚’æ›´æ–°
        currentPresetSlot = slotNumber;
        updateCurrentPresetInfo();

        alert(`âœ… ã€Œ${preset.name}ã€ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼`);
    }

    /**
     * ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’å‰Šé™¤
     */
    function deletePreset(slotNumber) {
        const presetData = localStorage.getItem(`displayPreset${slotNumber}`);

        if (!presetData) {
            alert('âŒ ã“ã®ã‚¹ãƒ­ãƒƒãƒˆã«ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“');
            return;
        }

        const preset = JSON.parse(presetData);

        if (confirm(`ã€Œ${preset.name}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)) {
            localStorage.removeItem(`displayPreset${slotNumber}`);
            document.getElementById(`presetName${slotNumber}`).value = '';

            if (currentPresetSlot === slotNumber) {
                currentPresetSlot = null;
                updateCurrentPresetInfo();
            }

            alert(`âœ… ã€Œ${preset.name}ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸ`);
        }
    }

    /**
     * ç¾åœ¨ã®ãƒ—ãƒªã‚»ãƒƒãƒˆæƒ…å ±ã‚’æ›´æ–°
     */
    function updateCurrentPresetInfo() {
        const infoDiv = document.getElementById('currentPresetInfo');

        if (currentPresetSlot) {
            const presetData = localStorage.getItem(`displayPreset${currentPresetSlot}`);
            if (presetData) {
                const preset = JSON.parse(presetData);
                infoDiv.textContent = `ãƒ—ãƒªã‚»ãƒƒãƒˆ ${currentPresetSlot}: ${preset.name}`;
            } else {
                infoDiv.textContent = 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š';
            }
        } else {
            infoDiv.textContent = 'ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š';
        }
    }

    /**
     * ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒªã‚»ãƒƒãƒˆåã‚’èª­ã¿è¾¼ã¿
     */
    function loadPresetNames() {
        for (let i = 1; i <= 5; i++) {
            const presetData = localStorage.getItem(`displayPreset${i}`);
            if (presetData) {
                const preset = JSON.parse(presetData);
                document.getElementById(`presetName${i}`).value = preset.name;
            }
        }
    }

    /**
     * ã‚¹ãƒ†ãƒ¼ãƒˆã‹ã‚‰ã™ã¹ã¦ã®UIã‚’æ›´æ–°
     */
    function applyCustomizationsFromState() {
        // ãƒ†ã‚­ã‚¹ãƒˆ
        document.getElementById('customClinicName').value = customizeState.clinicName;
        document.getElementById('customAvailableMsg').value = customizeState.availableMsg;
        document.getElementById('customFullMsg').value = customizeState.fullMsg;
        document.getElementById('customSubMsg').value = customizeState.subMsg;
        document.getElementById('customQrMsg').value = customizeState.qrMsg;

        // ã‚¢ã‚¤ã‚³ãƒ³
        document.getElementById('customAvailableIcon').value = customizeState.availableIcon;
        document.getElementById('customFullIcon').value = customizeState.fullIcon;

        // è‰²
        document.getElementById('customAvailableBg').value = customizeState.availableBg;
        document.getElementById('customFullBg').value = customizeState.fullBg;
        document.getElementById('customBannerBg').value = customizeState.bannerBg;
        document.getElementById('customBannerText').value = customizeState.bannerText;

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³
        if (customizeState.faviconEnabled !== undefined) {
            document.getElementById('customFaviconAvailableIcon').value = customizeState.faviconAvailableIcon || 'OK';
            document.getElementById('customFaviconFullIcon').value = customizeState.faviconFullIcon || 'âœ•';
            document.getElementById('customFaviconAvailableColor').value = customizeState.faviconAvailableColor || '#4CAF50';
            document.getElementById('customFaviconFullColor').value = customizeState.faviconFullColor || '#F44336';
            document.getElementById('faviconAvailableColorValue').textContent = customizeState.faviconAvailableColor || '#4CAF50';
            document.getElementById('faviconFullColorValue').textContent = customizeState.faviconFullColor || '#F44336';
            updateActiveButton('btnFaviconOn', 'btnFaviconOff', customizeState.faviconEnabled);

            const faviconSettings = document.getElementById('faviconSettings');
            if (faviconSettings) {
                faviconSettings.style.display = customizeState.faviconEnabled ? 'block' : 'none';
            }

            updateFaviconPreview();
        }

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        document.getElementById('pulseScale').value = customizeState.pulseScale;
        document.getElementById('iconSize').value = customizeState.iconSize;
        document.getElementById('mainMsgSize').value = customizeState.mainMsgSize;
        document.getElementById('subMsgSize').value = customizeState.subMsgSize;
        document.getElementById('qrMsgSize').value = customizeState.qrMsgSize;
        document.getElementById('updateTimeSize').value = customizeState.updateTimeSize;

        updatePulseSpeedUI();

        // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        document.getElementById('customGradientColor1').value = customizeState.gradientColor1;
        document.getElementById('customGradientColor2').value = customizeState.gradientColor2;

        // èƒŒæ™¯ç‚¹æ»…
        if (customizeState.bgBlinkEnabled !== undefined) {
            document.getElementById('bgBlinkIntensity').value = customizeState.bgBlinkIntensity;
            document.getElementById('bgBlinkIntensityValue').textContent = customizeState.bgBlinkIntensity;
            updateActiveButton('btnBgBlinkOn', 'btnBgBlinkOff', customizeState.bgBlinkEnabled);

            // é€Ÿåº¦ãƒœã‚¿ãƒ³
            document.getElementById('btnBgBlinkSpeedSlow').classList.remove('active');
            document.getElementById('btnBgBlinkSpeedNormal').classList.remove('active');
            document.getElementById('btnBgBlinkSpeedFast').classList.remove('active');
            const speedBtn = 'btnBgBlinkSpeed' + customizeState.bgBlinkSpeed.charAt(0).toUpperCase() + customizeState.bgBlinkSpeed.slice(1);
            document.getElementById(speedBtn).classList.add('active');
            const speedLabels = { slow: 'é…ã„ (3.0ç§’)', normal: 'æ™®é€š (1.5ç§’)', fast: 'é€Ÿã„ (0.8ç§’)' };
            document.getElementById('bgBlinkSpeedValue').textContent = speedLabels[customizeState.bgBlinkSpeed];

            // ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒœã‚¿ãƒ³
            document.getElementById('btnBgBlinkPatternPulse').classList.remove('active');
            document.getElementById('btnBgBlinkPatternFlash').classList.remove('active');
            const patternBtn = 'btnBgBlinkPattern' + customizeState.bgBlinkPattern.charAt(0).toUpperCase() + customizeState.bgBlinkPattern.slice(1);
            document.getElementById(patternBtn).classList.add('active');
            const patternLabels = { pulse: 'ãªã‚ã‚‰ã‹', flash: 'ãƒ‘ãƒãƒ‘ãƒ' };
            document.getElementById('bgBlinkPatternValue').textContent = patternLabels[customizeState.bgBlinkPattern];
        }

        // ãƒœã‚¿ãƒ³çŠ¶æ…‹ã‚’æ›´æ–°
        updateActiveButton('btnPulseOn', 'btnPulseOff', customizeState.pulseEnabled);
        updateActiveButton('btnGlowOn', 'btnGlowOff', customizeState.glowEnabled);
        updateActiveButton('btnGlowPulseOn', 'btnGlowPulseOff', customizeState.glowPulse);
        updateActiveButton('btnGradientOn', 'btnGradientOff', customizeState.gradientEnabled);
        updateActiveButton('btnGradientAnimOn', 'btnGradientAnimOff', customizeState.gradientAnimEnabled);
        updateActiveButton4('btnFloatIcon', 'btnFloatText', 'btnFloatBoth', 'btnFloatOff',
            customizeState.floatTarget === 'icon',
            customizeState.floatTarget === 'text',
            customizeState.floatTarget === 'both',
            customizeState.floatTarget === 'off');
        updateActiveButton4('btnZoomIcon', 'btnZoomText', 'btnZoomBoth', 'btnZoomOff',
            customizeState.zoomTarget === 'icon',
            customizeState.zoomTarget === 'text',
            customizeState.zoomTarget === 'both',
            customizeState.zoomTarget === 'off');
        updateActiveButton4('btnScreenNone', 'btnScreenShakeV', 'btnScreenShakeH', 'btnScreenZoom',
            customizeState.screenEffect === 'none',
            customizeState.screenEffect === 'shakeV',
            customizeState.screenEffect === 'shakeH',
            customizeState.screenEffect === 'zoom');

        // ãƒãƒŠãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ
        if (document.getElementById('openingSoonText') && customizeState.openingSoonText !== undefined) {
            document.getElementById('openingSoonText').value = customizeState.openingSoonText;
            document.getElementById('lunchBreakText').value = customizeState.lunchBreakText;
            document.getElementById('bannerFontSize').value = customizeState.bannerFontSize;
            document.getElementById('bannerFontSizeValue').textContent = customizeState.bannerFontSize + 'vw';
            document.getElementById('bannerHeight').value = customizeState.bannerHeight;
            document.getElementById('bannerHeightValue').textContent = customizeState.bannerHeight + 'px';
            document.getElementById('bannerPadding').value = customizeState.bannerPadding;
            document.getElementById('bannerPaddingValue').textContent = customizeState.bannerPadding + 'px';
        }

        // QRã‚³ãƒ¼ãƒ‰è¨­å®š
        if (customizeState.qrEnabled !== undefined) {
            document.getElementById('qrImageUrl').value = customizeState.qrImageUrl || 'Downloads/QR_fujiminohikari.png';
            document.getElementById('qrSize').value = customizeState.qrSize ?? 175;
            document.getElementById('qrSizeValue').textContent = (customizeState.qrSize ?? 175) + 'px';
            document.getElementById('qrOpacity').value = ((customizeState.qrOpacity ?? 1.0) * 100);
            document.getElementById('qrOpacityValue').textContent = ((customizeState.qrOpacity ?? 1.0) * 100) + '%';
            document.getElementById('qrBorderRadius').value = customizeState.qrBorderRadius ?? 10;
            document.getElementById('qrBorderRadiusValue').textContent = (customizeState.qrBorderRadius ?? 10) + 'px';
            document.getElementById('qrPosition').value = customizeState.qrPosition || 'bottom-left';
            updateActiveButton('btnQrOn', 'btnQrOff', customizeState.qrEnabled);
            updateActiveButton('btnQrShadowOn', 'btnQrShadowOff', customizeState.qrShadowEnabled);

            const qrSettings = document.getElementById('qrSettings');
            if (qrSettings) {
                qrSettings.style.display = customizeState.qrEnabled ? 'block' : 'none';
            }
        }

        // ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ›´æ–°
        applyCustomizations();
        updateAnimationStyle();
        updateAnimation2Style();
        updateEffectsStyle();
        applyFontSizes();
        applyBannerSettings();
        applyLayoutSettings();
        applyQRSettings();
        applyBgBlinkEffect();
    }

    /**
     * ã™ã¹ã¦ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚’ãƒªã‚»ãƒƒãƒˆ
     */
    function resetAllCustomizations() {
        // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºçŠ¶æ…‹ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
        customizeState.clinicName = 'ãµã˜ã¿é‡ã²ã‹ã‚Šçœ¼ç§‘';
        customizeState.availableMsg = '{day}åˆ†ã®äºˆç´„æ  ã€Œç©ºãã€ã‚ã‚Š';
        customizeState.fullMsg = '{day}ã®äºˆç´„ã¯ ã€Œæº€æ ã€ã§ã™';
        customizeState.subMsg = 'èª ã«æã‚Œå…¥ã‚Šã¾ã™ãŒã€ç¿Œè¨ºç™‚æ—¥ä»¥é™ã§ ã”äºˆç´„ãã ã•ã„';
        customizeState.qrMsg = 'å—ä»˜çª“å£ ã‚‚ã—ãã¯ QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰ ã”äºˆç´„ãã ã•ã„';
        customizeState.availableIcon = 'â­•';
        customizeState.fullIcon = 'ğŸ˜”';
        customizeState.availableBg = '#27ae60';
        customizeState.fullBg = '#dc3545';
        customizeState.bannerBg = '#ffc107';
        customizeState.bannerText = '#212529';
        // ã‚µã‚¤ã‚º
        customizeState.iconSize = 12;
        customizeState.mainMsgSize = 6;
        customizeState.subMsgSize = 4.1;
        customizeState.qrMsgSize = 4.6;
        customizeState.updateTimeSize = 3;
        // ãƒãƒŠãƒ¼è¨­å®š
        customizeState.openingSoonText = '10æ™‚ã«çª“å£ãŒé–‹ãã¾ã™ã€€ãŠå¾…ã¡ä¸‹ã•ã„';
        customizeState.lunchBreakText = 'æ˜¼ä¼‘ã¿ä¸­ã€€åˆå¾Œï¼“æ™‚ã‚ˆã‚Šçª“å£ãŒé–‹ãã¾ã™';
        customizeState.bannerFontSize = 2.8;
        customizeState.bannerHeight = 115;
        customizeState.bannerPadding = 0;
        // ã‚¢ãƒ‹ãƒ¡1
        customizeState.pulseEnabled = true;
        customizeState.pulseSpeed = 3;
        customizeState.pulseScale = 1.15;
        customizeState.glowEnabled = true;
        customizeState.glowIntensity = 'weak';
        customizeState.glowColor = 'yellow';
        customizeState.glowPulse = false;
        // ã‚¢ãƒ‹ãƒ¡2
        customizeState.floatTarget = 'off';
        customizeState.floatSpeed = 'slow';
        customizeState.zoomTarget = 'icon';
        customizeState.zoomSpeed = 'normal';
        customizeState.sparkleEnabled = false;
        customizeState.neonEnabled = false;
        customizeState.neonSpeed = 'normal';
        customizeState.screenEffect = 'none';
        // èƒŒæ™¯
        customizeState.gradientEnabled = false;
        customizeState.gradientType = 'diagonal';
        customizeState.gradientColor1 = '#27ae60';
        customizeState.gradientColor2 = '#1e8449';
        customizeState.gradientAnimEnabled = false;
        // èƒŒæ™¯ç‚¹æ»…
        customizeState.bgBlinkEnabled = false;
        customizeState.bgBlinkSpeed = 'normal';
        customizeState.bgBlinkIntensity = 0.3;
        customizeState.bgBlinkPattern = 'pulse';
        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³
        customizeState.faviconEnabled = true;
        customizeState.faviconAvailableIcon = 'OK';
        customizeState.faviconAvailableColor = '#4CAF50';
        customizeState.faviconFullIcon = 'âœ•';
        customizeState.faviconFullColor = '#F44336';
        // QRã‚³ãƒ¼ãƒ‰
        customizeState.qrEnabled = true;
        customizeState.qrSize = 175;
        customizeState.qrOpacity = 1;
        customizeState.qrBorderRadius = 10;
        customizeState.qrShadowEnabled = true;
        customizeState.qrPosition = 'bottom-left';

        // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æ›´æ–°
        document.getElementById('customClinicName').value = customizeState.clinicName;
        document.getElementById('customAvailableMsg').value = customizeState.availableMsg;
        document.getElementById('customFullMsg').value = customizeState.fullMsg;
        document.getElementById('customSubMsg').value = customizeState.subMsg;
        document.getElementById('customQrMsg').value = customizeState.qrMsg;
        document.getElementById('customAvailableIcon').value = customizeState.availableIcon;
        document.getElementById('customFullIcon').value = customizeState.fullIcon;
        document.getElementById('customAvailableBg').value = customizeState.availableBg;
        document.getElementById('customFullBg').value = customizeState.fullBg;
        document.getElementById('customBannerBg').value = customizeState.bannerBg;
        document.getElementById('customBannerText').value = customizeState.bannerText;

        document.getElementById('pulseScale').value = customizeState.pulseScale;
        document.getElementById('pulseScaleValue').textContent = customizeState.pulseScale;
        document.getElementById('iconSize').value = customizeState.iconSize;
        document.getElementById('iconSizeValue').textContent = customizeState.iconSize + 'vw';
        document.getElementById('mainMsgSize').value = customizeState.mainMsgSize;
        document.getElementById('mainMsgSizeValue').textContent = customizeState.mainMsgSize + 'vw';
        document.getElementById('subMsgSize').value = customizeState.subMsgSize;
        document.getElementById('subMsgSizeValue').textContent = customizeState.subMsgSize + 'vw';
        document.getElementById('qrMsgSize').value = customizeState.qrMsgSize;
        document.getElementById('qrMsgSizeValue').textContent = customizeState.qrMsgSize + 'vw';
        document.getElementById('updateTimeSize').value = customizeState.updateTimeSize;
        document.getElementById('updateTimeSizeValue').textContent = customizeState.updateTimeSize + 'vw';

        // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚¿ãƒ–ã®å€¤ã‚’ãƒªã‚»ãƒƒãƒˆ
        document.getElementById('glowIntensityValue').textContent = 'å¼±';

        // èƒŒæ™¯ã‚¿ãƒ–ã®å€¤ã‚’ãƒªã‚»ãƒƒãƒˆ
        document.getElementById('gradientTypeValue').textContent = 'æ–œã‚';
        document.getElementById('customGradientColor1').value = customizeState.gradientColor1;
        document.getElementById('customGradientColor2').value = customizeState.gradientColor2;
        document.getElementById('gradientColor1Value').textContent = customizeState.gradientColor1;
        document.getElementById('gradientColor2Value').textContent = customizeState.gradientColor2;

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã®å€¤ã‚’ãƒªã‚»ãƒƒãƒˆ
        document.getElementById('customFaviconAvailableIcon').value = customizeState.faviconAvailableIcon;
        document.getElementById('customFaviconFullIcon').value = customizeState.faviconFullIcon;
        document.getElementById('customFaviconAvailableColor').value = customizeState.faviconAvailableColor;
        document.getElementById('customFaviconFullColor').value = customizeState.faviconFullColor;
        document.getElementById('faviconAvailableColorValue').textContent = customizeState.faviconAvailableColor;
        document.getElementById('faviconFullColorValue').textContent = customizeState.faviconFullColor;
        updateFaviconPreview();

        // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’æ›´æ–°
        updateActiveButton('btnPulseOn', 'btnPulseOff', true);
        updateActiveButton('btnGlowOn', 'btnGlowOff', true);
        updateActiveButton('btnGlowPulseOn', 'btnGlowPulseOff', false);
        updateActiveButton('btnGradientOn', 'btnGradientOff', false);
        updateActiveButton('btnGradientAnimOn', 'btnGradientAnimOff', false);
        updateActiveButton('btnFaviconOn', 'btnFaviconOff', true);
        updateActiveButton4('btnFloatIcon', 'btnFloatText', 'btnFloatBoth', 'btnFloatOff',
            false, false, false, true);
        updateActiveButton4('btnZoomIcon', 'btnZoomText', 'btnZoomBoth', 'btnZoomOff',
            true, false, false, false);
        updateActiveButton4('btnScreenNone', 'btnScreenShakeV', 'btnScreenShakeH', 'btnScreenZoom',
            true, false, false, false);

        updatePulseSpeedUI();

        // ã‚¢ã‚¤ã‚³ãƒ³é¸æŠã‚’ãƒªã‚»ãƒƒãƒˆ
        document.querySelectorAll('.icon-selector button').forEach(btn => btn.classList.remove('selected'));

        // å‹•çš„ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å‰Šé™¤
        const animStyle = document.getElementById('dynamic-animation-style');
        if (animStyle) animStyle.remove();
        const anim2Style = document.getElementById('dynamic-animation2-style');
        if (anim2Style) anim2Style.remove();
        const fontStyle = document.getElementById('dynamic-fontsize-style');
        if (fontStyle) fontStyle.remove();
        const effectsStyle = document.getElementById('dynamic-effects-style');
        if (effectsStyle) effectsStyle.remove();

        // ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ›´æ–°
        applyCustomizations();

        alert('ã™ã¹ã¦ã®è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã—ã¾ã—ãŸ');
    }

    /**
     * ç¾åœ¨ã®è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ä¿å­˜
     */
    function saveAsDefault() {
        if (!confirm('ç¾åœ¨ã®è¨­å®šã‚’èµ·å‹•æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ\næ¬¡å›èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚')) {
            return;
        }

        try {
            localStorage.setItem('defaultSettings', JSON.stringify(customizeState));
            alert('âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸï¼\næ¬¡å›èµ·å‹•æ™‚ã«è‡ªå‹•çš„ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚');
        } catch (e) {
            alert('âŒ è¨­å®šã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e.message);
        }
    }

    /**
     * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’èª­ã¿è¾¼ã‚€
     */
    function loadDefaultSettings() {
        try {
            const saved = localStorage.getItem('defaultSettings');
            if (!saved) {
                alert('â„¹ï¸ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚');
                return;
            }

            if (!confirm('ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’èª­ã¿è¾¼ã¿ã¾ã™ã‹ï¼Ÿ\nç¾åœ¨ã®è¨­å®šã¯ä¸Šæ›¸ãã•ã‚Œã¾ã™ã€‚')) {
                return;
            }

            const settings = JSON.parse(saved);
            Object.assign(customizeState, settings);

            // UIè¦ç´ ã‚’æ›´æ–°
            syncUIFromState();
            applyCustomizations();

            alert('âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸï¼');
        } catch (e) {
            alert('âŒ è¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e.message);
        }
    }

    /**
     * ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ã‚¯ãƒªã‚¢
     */
    function clearDefaultSettings() {
        if (!confirm('ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\næ¬¡å›èµ·å‹•æ™‚ã¯åˆæœŸè¨­å®šã§èµ·å‹•ã—ã¾ã™ã€‚')) {
            return;
        }

        try {
            localStorage.removeItem('defaultSettings');
            alert('âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚');
        } catch (e) {
            alert('âŒ è¨­å®šã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + e.message);
        }
    }

    /**
     * UIã‚’customizeStateã‹ã‚‰åŒæœŸ
     */
    function syncUIFromState() {
        // ãƒ†ã‚­ã‚¹ãƒˆ
        document.getElementById('customClinicName').value = customizeState.clinicName;
        document.getElementById('customAvailableMsg').value = customizeState.availableMsg;
        document.getElementById('customFullMsg').value = customizeState.fullMsg;
        document.getElementById('customSubMsg').value = customizeState.subMsg;
        document.getElementById('customQrMsg').value = customizeState.qrMsg;
        document.getElementById('customAvailableIcon').value = customizeState.availableIcon;
        document.getElementById('customFullIcon').value = customizeState.fullIcon;

        // è‰²
        document.getElementById('customAvailableBg').value = customizeState.availableBg;
        document.getElementById('customFullBg').value = customizeState.fullBg;
        document.getElementById('customBannerBg').value = customizeState.bannerBg;
        document.getElementById('customBannerText').value = customizeState.bannerText;

        // ã‚µã‚¤ã‚º
        document.getElementById('iconSize').value = customizeState.iconSize;
        document.getElementById('iconSizeValue').textContent = customizeState.iconSize + 'vw';
        document.getElementById('mainMsgSize').value = customizeState.mainMsgSize;
        document.getElementById('mainMsgSizeValue').textContent = customizeState.mainMsgSize + 'vw';
        document.getElementById('subMsgSize').value = customizeState.subMsgSize;
        document.getElementById('subMsgSizeValue').textContent = customizeState.subMsgSize + 'vw';
        document.getElementById('qrMsgSize').value = customizeState.qrMsgSize;
        document.getElementById('qrMsgSizeValue').textContent = customizeState.qrMsgSize + 'vw';
        document.getElementById('updateTimeSize').value = customizeState.updateTimeSize;
        document.getElementById('updateTimeSizeValue').textContent = customizeState.updateTimeSize + 'vw';

        // ãƒãƒŠãƒ¼
        if (document.getElementById('openingSoonText')) {
            document.getElementById('openingSoonText').value = customizeState.openingSoonText;
            document.getElementById('lunchBreakText').value = customizeState.lunchBreakText;
            document.getElementById('bannerFontSize').value = customizeState.bannerFontSize;
            document.getElementById('bannerFontSizeValue').textContent = customizeState.bannerFontSize + 'vw';
            document.getElementById('bannerHeight').value = customizeState.bannerHeight;
            document.getElementById('bannerHeightValue').textContent = customizeState.bannerHeight + 'px';
            document.getElementById('bannerPadding').value = customizeState.bannerPadding;
            document.getElementById('bannerPaddingValue').textContent = customizeState.bannerPadding + 'px';
        }

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        document.getElementById('pulseScale').value = customizeState.pulseScale;
        document.getElementById('pulseScaleValue').textContent = customizeState.pulseScale;

        updatePulseSpeedUI();

        // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
        if (document.getElementById('iconToMainGap')) {
            document.getElementById('iconToMainGap').value = customizeState.iconToMainGap;
            document.getElementById('iconToMainGapValue').textContent = customizeState.iconToMainGap + 'px';
            document.getElementById('mainToSubGap').value = customizeState.mainToSubGap;
            document.getElementById('mainToSubGapValue').textContent = customizeState.mainToSubGap + 'px';
            document.getElementById('subToQrGap').value = customizeState.subToQrGap;
            document.getElementById('subToQrGapValue').textContent = customizeState.subToQrGap + 'px';
            document.getElementById('qrToUpdateGap').value = customizeState.qrToUpdateGap;
            document.getElementById('qrToUpdateGapValue').textContent = customizeState.qrToUpdateGap + 'px';

            // ãƒ•ã‚©ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«
            const weightLabels = { 400: 'æ¨™æº–', 700: 'å¤ªå­—', 900: 'æ¥µå¤ª' };
            document.getElementById('mainMsgFontWeightValue').textContent = weightLabels[customizeState.mainMsgFontWeight];
            document.getElementById('subMsgFontWeightValue').textContent = weightLabels[customizeState.subMsgFontWeight];
            document.getElementById('qrMsgFontWeightValue').textContent = weightLabels[customizeState.qrMsgFontWeight];
            document.getElementById('updateTimeFontWeightValue').textContent = weightLabels[customizeState.updateTimeFontWeight];

            document.getElementById('mainMsgLineHeight').value = customizeState.mainMsgLineHeight;
            document.getElementById('mainMsgLineHeightValue').textContent = customizeState.mainMsgLineHeight;
            document.getElementById('mainMsgLetterSpacing').value = customizeState.mainMsgLetterSpacing;
            document.getElementById('mainMsgLetterSpacingValue').textContent = customizeState.mainMsgLetterSpacing + 'px';

            // ãƒ†ã‚­ã‚¹ãƒˆåŠ¹æœ
            document.getElementById('textShadowColor').value = customizeState.textShadowColor;
            document.getElementById('textShadowBlur').value = customizeState.textShadowBlur;
            document.getElementById('textShadowBlurValue').textContent = customizeState.textShadowBlur + 'px';
            document.getElementById('textShadowDistance').value = customizeState.textShadowDistance;
            document.getElementById('textShadowDistanceValue').textContent = customizeState.textShadowDistance + 'px';
            document.getElementById('textStrokeColor').value = customizeState.textStrokeColor;
            document.getElementById('textStrokeWidth').value = customizeState.textStrokeWidth;
            document.getElementById('textStrokeWidthValue').textContent = customizeState.textStrokeWidth + 'px';

            updateActiveButton('btnTextShadowOn', 'btnTextShadowOff', customizeState.textShadowEnabled);
            updateActiveButton('btnTextStrokeOn', 'btnTextStrokeOff', customizeState.textStrokeEnabled);

            applyLayoutSettings();
        }

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³
        document.getElementById('customFaviconAvailableIcon').value = customizeState.faviconAvailableIcon;
        document.getElementById('customFaviconFullIcon').value = customizeState.faviconFullIcon;
        document.getElementById('customFaviconAvailableColor').value = customizeState.faviconAvailableColor;
        document.getElementById('customFaviconFullColor').value = customizeState.faviconFullColor;

        updateFaviconPreview();
    }

    /**
     * ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆãƒ¢ãƒ¼ãƒ‰å¤‰æ›´ã¯ã—ãªã„ï¼‰
     */
    function toggleDebugPanel() {
        const panel = document.getElementById('debugPanel');
        const btn = document.getElementById('btnTogglePanel');
        const body = document.body;

        if (panel.classList.contains('hidden')) {
            panel.classList.remove('hidden');
            body.classList.remove('panel-hidden');
            if (btn) {
                btn.classList.add('active');
                btn.textContent = 'ğŸ‘ï¸ ãƒ‘ãƒãƒ«éè¡¨ç¤º';
            }
        } else {
            panel.classList.add('hidden');
            body.classList.add('panel-hidden');
            if (btn) {
                btn.classList.remove('active');
                btn.textContent = 'ğŸ‘ï¸ ãƒ‘ãƒãƒ«è¡¨ç¤º';
            }
        }

        // ãƒ‘ãƒãƒ«è¡¨ç¤ºçŠ¶æ…‹ã«ã‚ˆã£ã¦ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚’èª¿æ•´
        setTimeout(updatePreviewScale, 300);
    }

    /**
     * ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
     */
    function switchMode(mode) {
        const debugBtnTop = document.getElementById('btnDebugModeTop');
        const productionBtnTop = document.getElementById('btnProductionModeTop');

        if (mode === 'debug') {
            // ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
            debugBtnTop.classList.add('active');
            productionBtnTop.classList.remove('active');

            stopProductionMode();

            // ãƒ‡ãƒãƒƒã‚°çŠ¶æ…‹ã§è¡¨ç¤ºã‚’æ›´æ–°
            updateDisplay();
        } else if (mode === 'production') {
            // æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ãˆ
            debugBtnTop.classList.remove('active');
            productionBtnTop.classList.add('active');

            startProductionMode();
        }
    }

    /**
     * ãƒ†ã‚¹ãƒˆçŠ¶æ…‹ï¼ˆç©ºã/æº€ï¼‰ã‚’åˆ‡ã‚Šæ›¿ãˆï¼ˆãƒˆãƒƒãƒ—ãƒãƒ¼ç”¨ï¼‰
     */
    function switchTestStatus(available) {
        testState.isAvailable = available;
        const availableBtn = document.getElementById('btnAvailableStatus');
        const fullBtn = document.getElementById('btnFullStatus');

        if (available) {
            availableBtn.classList.add('active');
            fullBtn.classList.remove('active');
        } else {
            availableBtn.classList.remove('active');
            fullBtn.classList.add('active');
        }

        updateDisplay();
    }

    /**
     * äºˆç´„å¯å¦ã‚’è¨­å®š
     */
    function setAvailability(available) {
        testState.isAvailable = available;
        updateActiveButton('btnAvailable', 'btnUnavailable', available);
        updateDisplay();
    }

    /**
     * ãƒ†ã‚¹ãƒˆæ™‚åˆ»ã‚’è¨­å®š
     */
    function setTestTime(hour, minute) {
        testState.hour = hour;
        testState.minute = minute;
        document.getElementById('timeInput').value =
            String(hour).padStart(2, '0') + ':' + String(minute).padStart(2, '0');
        updateDisplay();
    }

    /**
     * æ›œæ—¥ã‚’è¨­å®š
     */
    function setDayOfWeek(dayOfWeek) {
        testState.dayOfWeek = dayOfWeek;
        // æ—¥ä»˜ã‚‚èª¿æ•´ï¼ˆ2025/11/9ãŒæ—¥æ›œæ—¥ã¨ã—ã¦è¨ˆç®—ï¼‰
        testState.day = 9 + dayOfWeek;
        updateDisplay();
    }

    /**
     * ã‚«ã‚¹ã‚¿ãƒ æ™‚åˆ»ã‚’é©ç”¨
     */
    function applyCustomTime() {
        const timeValue = document.getElementById('timeInput').value;
        const [hour, minute] = timeValue.split(':').map(Number);
        testState.hour = hour;
        testState.minute = minute;
        updateDisplay();
    }

    /**
     * ç¾åœ¨æ™‚åˆ»ã«ãƒªã‚»ãƒƒãƒˆ
     */
    function resetToCurrentTime() {
        const now = new Date();
        testState.year = now.getFullYear();
        testState.month = now.getMonth() + 1;
        testState.day = now.getDate();
        testState.dayOfWeek = now.getDay();
        testState.hour = now.getHours();
        testState.minute = now.getMinutes();
        document.getElementById('timeInput').value =
            String(testState.hour).padStart(2, '0') + ':' + String(testState.minute).padStart(2, '0');
        updateDisplay();
    }

    /**
     * ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’æ›´æ–°
     */
    function updateActiveButton(btn1Id, btn2Id, isFirstActive) {
        const btn1 = document.getElementById(btn1Id);
        const btn2 = document.getElementById(btn2Id);
        if (isFirstActive) {
            btn1.classList.add('active');
            btn2.classList.remove('active');
        } else {
            btn1.classList.remove('active');
            btn2.classList.add('active');
        }
    }

    /**
     * ãƒ†ã‚¹ãƒˆçŠ¶æ…‹ã‹ã‚‰æ—¥æ™‚æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
     */
    function getTestTimestamp() {
        return `${testState.year}/${String(testState.month).padStart(2, '0')}/${String(testState.day).padStart(2, '0')} ${String(testState.hour).padStart(2, '0')}:${String(testState.minute).padStart(2, '0')}`;
    }

    /**
     * ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ã€Œæ›´æ–°ï¼šYYYY/MM/DD HH:MMã€å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
     */
    function formatTimestamp(timestampStr) {
        return `æ›´æ–°ï¼š${timestampStr}`;
    }

    /**
     * æ—¥ä»˜ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°
     */
    function calculateDayText(updateTime) {
        const now = new Date(updateTime);
        const dayOfWeek = now.getDay();
        const hour = now.getHours();
        const minute = now.getMinutes();
        const isAfter1830 = (hour > 18) || (hour === 18 && minute >= 30);

        let dayText = 'æœ¬æ—¥';

        if (isAfter1830) {
            const lastDayOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
            if (now.getDate() === lastDayOfMonth) {
                dayText = 'ç¿Œå–¶æ¥­æ—¥';
            } else if (dayOfWeek === 2) {
                dayText = 'æœ¨æ›œ';
            } else {
                dayText = 'æ˜æ—¥';
            }
        } else {
            if (dayOfWeek === 3) {
                dayText = 'æœ¨æ›œ';
            } else {
                dayText = 'æœ¬æ—¥';
            }
        }

        return dayText;
    }

    /**
     * å–¶æ¥­æ™‚é–“å‰åˆ¤å®šé–¢æ•°ï¼ˆ8:00-10:00ã€å–¶æ¥­æ—¥ã®ã¿ï¼‰
     */
    function isOpeningSoon(updateTime) {
        const now = new Date(updateTime);
        const dayOfWeek = now.getDay(); // 0=æ—¥, 1=æœˆ, 2=ç«, 3=æ°´...
        const hour = now.getHours();

        // æ°´æ›œæ—¥ï¼ˆä¼‘è¨ºæ—¥ï¼‰ã¯è¡¨ç¤ºã—ãªã„
        if (dayOfWeek === 3) {
            return false;
        }

        // 8:00-9:59ã®é–“
        return hour >= 8 && hour < 10;
    }

    /**
     * æ˜¼ä¼‘ã¿åˆ¤å®šé–¢æ•°ï¼ˆ13:30-15:00ã€å–¶æ¥­æ—¥ã®ã¿ï¼‰
     */
    function isLunchBreak(updateTime) {
        const now = new Date(updateTime);
        const dayOfWeek = now.getDay();
        const hour = now.getHours();
        const minute = now.getMinutes();

        // æ°´æ›œæ—¥ï¼ˆä¼‘è¨ºæ—¥ï¼‰ã¯è¡¨ç¤ºã—ãªã„
        if (dayOfWeek === 3) {
            return false;
        }

        // 13:30-15:00ã®é–“
        return (hour === 13 && minute >= 30) || (hour === 14);
    }

    /**
     * ãƒãƒŠãƒ¼ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’æ›´æ–°
     */
    function updateBanners(updateTime) {
        const openingSoonBanner = document.getElementById('openingSoonBanner');
        const lunchBreakBanner = document.getElementById('lunchBreakBanner');

        // ãƒ†ã‚­ã‚¹ãƒˆã‚’æ›´æ–°ï¼ˆcustomizeStateã‹ã‚‰å–å¾—ï¼‰
        openingSoonBanner.textContent = customizeState.openingSoonText;
        lunchBreakBanner.textContent = customizeState.lunchBreakText;

        // å–¶æ¥­æ™‚é–“å‰ãƒãƒŠãƒ¼
        if (isOpeningSoon(updateTime)) {
            openingSoonBanner.classList.add('show');
        } else {
            openingSoonBanner.classList.remove('show');
        }

        // æ˜¼ä¼‘ã¿ãƒãƒŠãƒ¼
        if (isLunchBreak(updateTime)) {
            lunchBreakBanner.classList.add('show');
        } else {
            lunchBreakBanner.classList.remove('show');
        }
    }

    /**
     * ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ›´æ–°
     */
    function updateDisplay() {
        const container = document.getElementById('displayContainer');
        const timestampStr = getTestTimestamp();
        const isAvailable = testState.isAvailable;

        // ãƒãƒŠãƒ¼ã‚’æ›´æ–°
        updateBanners(timestampStr);

        // æ—¥ä»˜ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨ˆç®—
        const dayText = calculateDayText(timestampStr);

        // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        const formattedTime = formatTimestamp(timestampStr);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ç½®æ›
        const availableMsg = customizeState.availableMsg.replace('{day}', dayText);
        const fullMsg = customizeState.fullMsg.replace('{day}', dayText);

        if (isAvailable) {
            container.className = 'display-container available';

            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
            if (customizeState.gradientEnabled) {
                const c1 = customizeState.gradientColor1;
                const c2 = customizeState.gradientColor2;
                switch (customizeState.gradientType) {
                    case 'diagonal':
                        container.style.background = `linear-gradient(135deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'radial':
                        container.style.background = `radial-gradient(circle, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'horizontal':
                        container.style.background = `linear-gradient(90deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'vertical':
                        container.style.background = `linear-gradient(180deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                }

                // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                if (customizeState.gradientAnimEnabled) {
                    container.style.backgroundSize = '200% 200%';
                    container.style.animation = 'gradientShift 10s ease infinite';
                } else {
                    container.style.backgroundSize = '';
                    container.style.animation = '';
                }
            } else {
                container.style.background = customizeState.availableBg;
                container.style.backgroundSize = '';
                container.style.animation = '';
            }

            container.innerHTML = `
                <div class="clinic-name">${customizeState.clinicName}</div>
                <div class="icon">${customizeState.availableIcon}</div>
                <div class="main-message">${availableMsg}</div>
                <div class="qr-message">${customizeState.qrMsg}</div>
                <div class="update-time">${formattedTime}</div>
            `;
        } else {
            container.className = 'display-container unavailable';

            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
            if (customizeState.gradientEnabled) {
                const c1 = customizeState.gradientColor1;
                const c2 = customizeState.gradientColor2;
                switch (customizeState.gradientType) {
                    case 'diagonal':
                        container.style.background = `linear-gradient(135deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'radial':
                        container.style.background = `radial-gradient(circle, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'horizontal':
                        container.style.background = `linear-gradient(90deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'vertical':
                        container.style.background = `linear-gradient(180deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                }

                // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                if (customizeState.gradientAnimEnabled) {
                    container.style.backgroundSize = '200% 200%';
                    container.style.animation = 'gradientShift 10s ease infinite';
                } else {
                    container.style.backgroundSize = '';
                    container.style.animation = '';
                }
            } else {
                container.style.background = customizeState.fullBg;
                container.style.backgroundSize = '';
                container.style.animation = '';
            }

            container.innerHTML = `
                <div class="clinic-name">${customizeState.clinicName}</div>
                <div class="icon">${customizeState.fullIcon}</div>
                <div class="main-message">${fullMsg}</div>
                <div class="sub-message">${customizeState.subMsg}</div>
                <div class="qr-message">${customizeState.qrMsg}</div>
                <div class="update-time">${formattedTime}</div>
            `;
        }

        // ãƒãƒŠãƒ¼ã®è‰²ã‚’é©ç”¨
        const openingSoonBanner = document.getElementById('openingSoonBanner');
        const lunchBreakBanner = document.getElementById('lunchBreakBanner');
        openingSoonBanner.style.background = customizeState.bannerBg;
        openingSoonBanner.style.color = customizeState.bannerText;
        lunchBreakBanner.style.background = customizeState.bannerBg;
        lunchBreakBanner.style.color = customizeState.bannerText;

        // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã‚’æ›´æ–°
        updateFavicon();
    }

    /**
     * ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ã€Œæ›´æ–°ï¼šYYYY/MM/DD HH:MMã€å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆæœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰
     */
    function formatTimestampProduction(timestampStr) {
        // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ãƒ‘ãƒ¼ã‚¹
        const date = new Date(timestampStr);

        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        const hours = String(date.getHours()).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');

        return `æ›´æ–°ï¼š${year}/${month}/${day} ${hours}:${minutes}`;
    }

    /**
     * ã€æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã€‘äºˆç´„çŠ¶æ³ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
     */
    async function updateReservationStatus() {
        const container = document.getElementById('displayContainer');

        try {
            // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const response = await fetch(API_URL);
            const text = await response.text();

            // JSONãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºï¼ˆGoogleç‰¹æœ‰ã®å½¢å¼ï¼‰
            const json = JSON.parse(text.substring(47).slice(0, -2));

            // ãƒ‡ãƒ¼ã‚¿ã®è¡Œã‚’å–å¾—
            const rows = json.table.rows;

            if (rows.length === 0) {
                throw new Error('ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
            }

            // å…¨ã¦ã®è¡Œã‹ã‚‰æœ€æ–°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æ¢ã™
            let latestRow = null;
            let latestDate = null;

            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                if (row.c && row.c[0] && row.c[0].v) {
                    // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’Dateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
                    const timestampStr = row.c[0].f || row.c[0].v;
                    const date = new Date(timestampStr);

                    if (!latestDate || date > latestDate) {
                        latestDate = date;
                        latestRow = row;
                    }
                }
            }

            if (!latestRow) {
                throw new Error('æœ‰åŠ¹ãªãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“');
            }

            const timestamp = latestRow.c[0].f; // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿ï¼‰
            const status = latestRow.c[1].v; // äºˆç´„çŠ¶æ³ï¼ˆã€Œç©ºãã‚ã‚Šã€orã€Œæº€ã€ï¼‰

            // äºˆç´„å¯èƒ½ã‹ã©ã†ã‹ã‚’åˆ¤å®šï¼ˆã€Œç©ºãã‚ã‚Šã€ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ï¼‰
            const isAvailable = status.includes('ç©ºãã‚ã‚Š');

            // ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’æ›´æ–°ï¼ˆæœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼‰
            displayStatusProduction(isAvailable, timestamp);

        } catch (error) {
            console.error('ã‚¨ãƒ©ãƒ¼:', error);
            displayError();
        }
    }

    /**
     * ã€æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã€‘ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
     */
    function displayStatusProduction(isAvailable, updateTime) {
        const container = document.getElementById('displayContainer');
        lastProductionResult = { isAvailable, updateTime };

        // ãƒãƒŠãƒ¼ã‚’æ›´æ–°
        updateBanners(updateTime);

        // æ—¥ä»˜ãƒ†ã‚­ã‚¹ãƒˆã‚’è¨ˆç®—
        const dayText = calculateDayText(updateTime);

        // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        const formattedTime = formatTimestampProduction(updateTime);

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ç½®æ›
        const availableMsg = customizeState.availableMsg.replace('{day}', dayText);
        const fullMsg = customizeState.fullMsg.replace('{day}', dayText);

        if (isAvailable) {
            container.className = 'display-container available';

            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
            if (customizeState.gradientEnabled) {
                const c1 = customizeState.gradientColor1;
                const c2 = customizeState.gradientColor2;
                switch (customizeState.gradientType) {
                    case 'diagonal':
                        container.style.background = `linear-gradient(135deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'radial':
                        container.style.background = `radial-gradient(circle, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'horizontal':
                        container.style.background = `linear-gradient(90deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'vertical':
                        container.style.background = `linear-gradient(180deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                }

                if (customizeState.gradientAnimEnabled) {
                    container.style.backgroundSize = '200% 200%';
                    container.style.animation = 'gradientShift 10s ease infinite';
                } else {
                    container.style.backgroundSize = '';
                    container.style.animation = '';
                }
            } else {
                container.style.background = customizeState.availableBg;
                container.style.backgroundSize = '';
                container.style.animation = '';
            }

            container.innerHTML = `
                <div class="clinic-name">${customizeState.clinicName}</div>
                <div class="icon">${customizeState.availableIcon}</div>
                <div class="main-message">${availableMsg}</div>
                <div class="qr-message">${customizeState.qrMsg}</div>
                <div class="update-time">${formattedTime}</div>
            `;
        } else {
            container.className = 'display-container unavailable';

            // ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
            if (customizeState.gradientEnabled) {
                const c1 = customizeState.gradientColor1;
                const c2 = customizeState.gradientColor2;
                switch (customizeState.gradientType) {
                    case 'diagonal':
                        container.style.background = `linear-gradient(135deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'radial':
                        container.style.background = `radial-gradient(circle, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'horizontal':
                        container.style.background = `linear-gradient(90deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                    case 'vertical':
                        container.style.background = `linear-gradient(180deg, ${c1} 0%, ${c2} 100%)`;
                        break;
                }

                if (customizeState.gradientAnimEnabled) {
                    container.style.backgroundSize = '200% 200%';
                    container.style.animation = 'gradientShift 10s ease infinite';
                } else {
                    container.style.backgroundSize = '';
                    container.style.animation = '';
                }
            } else {
                container.style.background = customizeState.fullBg;
                container.style.backgroundSize = '';
                container.style.animation = '';
            }

            container.innerHTML = `
                <div class="clinic-name">${customizeState.clinicName}</div>
                <div class="icon">${customizeState.fullIcon}</div>
                <div class="main-message">${fullMsg}</div>
                <div class="sub-message">${customizeState.subMsg}</div>
                <div class="qr-message">${customizeState.qrMsg}</div>
                <div class="update-time">${formattedTime}</div>
            `;
        }

        // ãƒãƒŠãƒ¼ã®è‰²ã‚’é©ç”¨
        const openingSoonBanner = document.getElementById('openingSoonBanner');
        const lunchBreakBanner = document.getElementById('lunchBreakBanner');
        openingSoonBanner.style.background = customizeState.bannerBg;
        openingSoonBanner.style.color = customizeState.bannerText;
        lunchBreakBanner.style.background = customizeState.bannerBg;
        lunchBreakBanner.style.color = customizeState.bannerText;

        // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’é©ç”¨
        updateAnimationStyle();
        updateEffectsStyle();
        applyFontSizes();
    }

    /**
     * èª­ã¿è¾¼ã¿ä¸­ã®è¡¨ç¤ºã‚’è¡Œã†
     */
    function showLoadingState() {
        const container = document.getElementById('displayContainer');
        if (!container) return;

        container.className = 'display-container loading';
        container.style.background = '';
        container.style.backgroundSize = '';
        container.style.animation = '';
        container.innerHTML = `
            <div class="clinic-name">${customizeState.clinicName}</div>
            <div class="icon">â³</div>
            <div class="main-message">èª­ã¿è¾¼ã¿ä¸­...</div>
            <div class="sub-message">ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­ã§ã™</div>
            <div class="qr-message">${customizeState.qrMsg}</div>
            <div class="update-time">æ›´æ–°ï¼š--/-- --:--</div>
        `;
    }

    /**
     * ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã™ã‚‹é–¢æ•°
     */
    function displayError() {
        const container = document.getElementById('displayContainer');
        container.className = 'display-container error';
        container.innerHTML = `
            <div class="clinic-name">${customizeState.clinicName}</div>
            <div class="icon">âš ï¸</div>
            <div class="main-message">æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“</div>
            <div class="error-message">ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„</div>
        `;
    }

    /**
     * æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹
     */
    function startProductionMode() {
        if (apiUpdateInterval) {
            clearInterval(apiUpdateInterval);
        }

        lastProductionResult = null;
        showLoadingState();

        // å³åº§ã«1å›å®Ÿè¡Œ
        updateReservationStatus();

        // 1åˆ†ã”ã¨ã«è‡ªå‹•æ›´æ–°
        apiUpdateInterval = setInterval(updateReservationStatus, 60000);

        isDebugMode = false;
    }

    /**
     * æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã‚’åœæ­¢
     */
    function stopProductionMode() {
        if (apiUpdateInterval) {
            clearInterval(apiUpdateInterval);
            apiUpdateInterval = null;
        }

        isDebugMode = true;
    }

    /**
     * ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚’è¨ˆç®—ã—ã¦é©ç”¨
     */
    function updatePreviewScale() {
        const previewContainer = document.querySelector('.preview-container');
        const displayArea = document.querySelector('.preview-container .display-area');

        if (!previewContainer || !displayArea) return;

        const containerRect = previewContainer.getBoundingClientRect();
        const containerWidth = containerRect.width;
        const containerHeight = containerRect.height;

        // 1920x1080ã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’ã‚³ãƒ³ãƒ†ãƒŠã«åã¾ã‚‹ã‚ˆã†ã«ã‚¹ã‚±ãƒ¼ãƒ«
        const scaleX = containerWidth / 1920;
        const scaleY = containerHeight / 1080;
        const scale = Math.min(scaleX, scaleY);

        displayArea.style.transform = `translate(-50%, -50%) scale(${scale})`;
    }

    // åˆæœŸè¡¨ç¤º
    loadPresetNames();
    updateCurrentPresetInfo();

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŒã‚ã‚Œã°èª­ã¿è¾¼ã‚€
    try {
        const saved = localStorage.getItem('defaultSettings');
        if (saved) {
            const settings = JSON.parse(saved);
            Object.assign(customizeState, settings);
            console.log('âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
            // UIè¦ç´ ã‚’åˆæœŸåŒ–
            syncUIFromState();
        }
    } catch (e) {
        console.error('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', e);
    }

    // æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã§é–‹å§‹
    isDebugMode = false;

    // ãƒˆãƒƒãƒ—ãƒãƒ¼ã®ãƒœã‚¿ãƒ³ã‚’åˆæœŸåŒ–
    const debugBtnTop = document.getElementById('btnDebugModeTop');
    const productionBtnTop = document.getElementById('btnProductionModeTop');
    const availableBtnTop = document.getElementById('btnAvailableStatus');
    const fullBtnTop = document.getElementById('btnFullStatus');
    if (debugBtnTop) debugBtnTop.classList.remove('active');
    if (productionBtnTop) productionBtnTop.classList.add('active');
    if (availableBtnTop) availableBtnTop.classList.remove('active');
    if (fullBtnTop) fullBtnTop.classList.remove('active');

    // ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºUIã®çŠ¶æ…‹ã‚’åæ˜ 
    applyCustomizationsFromState();

    // ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ã®åˆæœŸçŠ¶æ…‹ã‚’ä¿æŒ
    testState.isAvailable = true;

    // æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã‚’èµ·å‹•
    switchMode('production');

    // ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’åˆæœŸåŒ–
    updateFaviconPreview();
    updateFavicon();
    updatePulseSpeedUI();

    // åˆæœŸèµ·å‹•æ™‚ã¯ãƒ‡ãƒãƒƒã‚°ãƒ‘ãƒãƒ«ã‚’éè¡¨ç¤ºã«ã—ã¦ãŠã
    const debugPanel = document.getElementById('debugPanel');
    const toggleBtn = document.getElementById('btnTogglePanel');
    debugPanel.classList.add('hidden');
    document.body.classList.add('panel-hidden');
    if (toggleBtn) {
        toggleBtn.classList.remove('active');
        toggleBtn.textContent = 'ğŸ‘ï¸ ãƒ‘ãƒãƒ«è¡¨ç¤º';
    }

    // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ã‚¹ã‚±ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–
    updatePreviewScale();

    // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã«ã‚¹ã‚±ãƒ¼ãƒ«ã‚’å†è¨ˆç®—
    window.addEventListener('resize', updatePreviewScale);
</script>

<!-- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³ï¼ˆå³ä¸‹å›ºå®šã€ãƒ‘ãƒãƒ«éè¡¨ç¤ºæ™‚ã®ã¿è¡¨ç¤ºï¼‰ -->
<button id="floatingToggleBtn" class="floating-toggle-btn" onclick="toggleDebugPanel()">ğŸ› ï¸</button>

</body>
</html>
